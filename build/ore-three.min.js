window.ORE=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t){e.exports=window.THREE},function(e,t){e.exports="varying vec2 vUv;\r\nuniform sampler2D backbuffer;\r\nuniform vec2 resolution;\r\n\r\nuniform bool v;\r\nuniform float gaussVar;\r\nuniform sampler2D sceneTex;\r\n\r\n#define PI 3.14159265\r\n#define SAMPLES 32\r\n\r\nfloat gaussian( float x, float v ) {\r\n    return 1.0 / sqrt( 2.0 * PI * v ) * exp( - x * x / 2.0 / v );\r\n}\r\n\r\nvoid main(){\r\n\tvec2 bv = ( v ? vec2( 0.0, 1.0 ) : vec2( 1.0, 0.0 ) ) / resolution;\r\n\tvec3 sum = vec3( 0.0  );\r\n\tfor( int i = 0; i < SAMPLES; i++ ){\r\n\t\tvec3 t1 = texture2D( backbuffer, vUv + bv * float(i) ).xyz;\r\n\t\tvec3 t2 = texture2D( backbuffer, vUv - bv * float(i) ).xyz;\r\n\t\tfloat mul = gaussian( float ( i ), gaussVar ); \r\n\t\tsum += (t1 + t2) * mul * 1.0;\r\n\t}\r\n\r\n\tif(v){\r\n\t\tsum += texture2D( sceneTex, vUv ).xyz;\r\n\t}\r\n\r\n\tgl_FragColor = vec4( sum, 1.0);\r\n}"},function(e,t){e.exports="void main() {\r\n    if(gl_FragCoord.x <= 1.0){\r\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n        vec3 pos = texture2D( texturePosition, uv ).xyz;\r\n        vec3 vel = texture2D( textureVelocity, uv ).xyz;\r\n\r\n        pos += vel * 0.01;\r\n        gl_FragColor = vec4(pos,1.0);\r\n        \r\n    }else{\r\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n        vec2 bUV = (gl_FragCoord.xy - vec2(1.0,0.0)) / resolution.xy;\r\n        vec3 bPos = texture2D( texturePosition, bUV ).xyz;;\r\n        gl_FragColor = vec4(bPos,1.0);\r\n    }\r\n}"},function(e,t){e.exports="uniform float time;\r\nuniform float seed;\r\n\r\n//\r\n// Description : Array and textureless GLSL 2D/3D/4D simplex \r\n//               noise functions.\r\n//      Author : Ian McEwan, Ashima Arts.\r\n//  Maintainer : stegu\r\n//     Lastmod : 20110822 (ijm)\r\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\r\n//               Distributed under the MIT License. See LICENSE file.\r\n//               https://github.com/ashima/webgl-noise\r\n//               https://github.com/stegu/webgl-noise\r\n// \r\n\r\nvec4 mod289(vec4 x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\r\n\r\nfloat mod289(float x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\r\n\r\nvec4 permute(vec4 x) {\r\n     return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nfloat permute(float x) {\r\n     return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec4 taylorInvSqrt(vec4 r)\r\n{\r\n  return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nfloat taylorInvSqrt(float r)\r\n{\r\n  return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nvec4 grad4(float j, vec4 ip)\r\n  {\r\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\r\n  vec4 p,s;\r\n\r\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\r\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\r\n  s = vec4(lessThan(p, vec4(0.0)));\r\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \r\n\r\n  return p;\r\n  }\r\n\t\t\t\t\t\t\r\n// (sqrt(5) - 1)/4 = F4, used once below\r\n#define F4 0.309016994374947451\r\n\r\nfloat snoise(vec4 v)\r\n  {\r\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\r\n                        0.276393202250021,  // 2 * G4\r\n                        0.414589803375032,  // 3 * G4\r\n                       -0.447213595499958); // -1 + 4 * G4\r\n\r\n// First corner\r\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\r\n  vec4 x0 = v -   i + dot(i, C.xxxx);\r\n\r\n// Other corners\r\n\r\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\r\n  vec4 i0;\r\n  vec3 isX = step( x0.yzw, x0.xxx );\r\n  vec3 isYZ = step( x0.zww, x0.yyz );\r\n//  i0.x = dot( isX, vec3( 1.0 ) );\r\n  i0.x = isX.x + isX.y + isX.z;\r\n  i0.yzw = 1.0 - isX;\r\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\r\n  i0.y += isYZ.x + isYZ.y;\r\n  i0.zw += 1.0 - isYZ.xy;\r\n  i0.z += isYZ.z;\r\n  i0.w += 1.0 - isYZ.z;\r\n\r\n  // i0 now contains the unique values 0,1,2,3 in each channel\r\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\r\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\r\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\r\n\r\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\r\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\r\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\r\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\r\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\r\n  vec4 x1 = x0 - i1 + C.xxxx;\r\n  vec4 x2 = x0 - i2 + C.yyyy;\r\n  vec4 x3 = x0 - i3 + C.zzzz;\r\n  vec4 x4 = x0 + C.wwww;\r\n\r\n// Permutations\r\n  i = mod289(i); \r\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\r\n  vec4 j1 = permute( permute( permute( permute (\r\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\r\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\r\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\r\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\r\n\r\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\r\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\r\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\r\n\r\n  vec4 p0 = grad4(j0,   ip);\r\n  vec4 p1 = grad4(j1.x, ip);\r\n  vec4 p2 = grad4(j1.y, ip);\r\n  vec4 p3 = grad4(j1.z, ip);\r\n  vec4 p4 = grad4(j1.w, ip);\r\n\r\n// Normalise gradients\r\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n  p0 *= norm.x;\r\n  p1 *= norm.y;\r\n  p2 *= norm.z;\r\n  p3 *= norm.w;\r\n  p4 *= taylorInvSqrt(dot(p4,p4));\r\n\r\n// Mix contributions from the five corners\r\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\r\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\r\n  m0 = m0 * m0;\r\n  m1 = m1 * m1;\r\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\r\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\r\n\r\n  }\r\n\r\nvoid main() {\r\n    if(gl_FragCoord.x >= 1.0) return;    \r\n    \r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n    vec3 pos = texture2D( texturePosition, uv ).xyz;\r\n    vec3 vel = texture2D( textureVelocity, uv ).xyz;\r\n    float idParticle = uv.y * resolution.x + uv.x;\r\n    float scale = 0.08;\r\n    \r\n    vel.xyz += 40.0 * vec3(\r\n      snoise( vec4( scale * pos.xyz, 7.225 * seed * 200.0 + 0.4 * time ) ),\r\n      snoise( vec4( scale * pos.xyz, 3.553 * seed + 0.4 * time ) ),\r\n      snoise( vec4( scale * pos.xyz, 1.259 * seed * 10.0 + 0.4 * time ) )\r\n    ) * 0.05;\r\n\r\n    vec3 gpos = pos - vec3(0.0,0.0,0.0);\r\n    vel += -(gpos)* length(gpos) * 0.005;\r\n\r\n    vel.xyz *= 0.9 + abs(sin(uv.y * 9.0)) * 0.05;\r\n\r\n    gl_FragColor = vec4( vel.xyz, 1.0 );\r\n}"},function(e,t){e.exports="varying vec3 vViewPosition;\r\nattribute float uvx;\r\nattribute float uvy;\r\nuniform sampler2D texturePosition;\r\nuniform float camY;\r\n\r\nfloat PI = 3.14159265;\r\n\r\nfloat atan2(float y, float x)\r\n{\r\n    return x == 0.0 ? sign(y) * PI / 2.0 : atan(y, x);\r\n}\r\n\r\nmat2 rotate(float rad){\r\n    return mat2(cos(rad),sin(rad),-sin(rad),cos(rad));\r\n}\r\n\r\nvoid main() {\r\n    vec2 nUV = vec2(uvx,uvy) + vec2(1.0,0.0);\r\n    \r\n    if(nUV.x >= 1.0){\r\n        nUV = vec2(uvx,uvy) - vec2(1.0,0.0);\r\n    }\r\n\r\n    vec3 p = position * 0.3;\r\n    vec3 pos = texture2D( texturePosition, vec2(uvx,uvy)).xyz;\r\n    vec3 nPos = texture2D( texturePosition, nUV).xyz;\r\n\r\n    vec3 vec = normalize(nPos - pos);\r\n    float rotX = atan2(vec.y,vec.z);\r\n\r\n    p.xy *= sin(uvx * PI) * (sin(uvy * PI) * 1.0 + 0.1);\r\n    p.yz *= rotate(rotX);\r\n\r\n    vec4 mvPosition = modelViewMatrix * vec4(p + pos, 1.0 );\r\n    gl_Position = projectionMatrix * mvPosition;\r\n\r\n    vViewPosition = -mvPosition.xyz;\r\n}\r\n\r\n\r\n"},function(e,t){e.exports="varying vec2 vUv;\r\n\r\nvoid main() {\r\n    vec3 pos = position;\r\n    pos.z = 1.0;\r\n    gl_Position = vec4(pos,1.0);\r\n    vUv = uv;\r\n}\r\n\r\n\r\n"},function(e,t){e.exports="varying vec2 vUv;\r\nuniform vec2 domPos;\r\nuniform vec2 domSize;\r\nuniform vec2 windowSize;\r\nuniform float time;\r\n\r\nvoid main()\r\n{\r\n  float aspect = windowSize.x / windowSize.y;\r\n  float width = domSize.x / windowSize.x;\r\n\r\n  //左上(0,0)に\r\n  vec3 pos = position + vec3(1.0,-1.0,0.0);\r\n\r\n  //size\r\n  pos.x *= width;\r\n  pos.y *= (width * aspect) * (domSize.y / domSize.x);\r\n\r\n  //left top\r\n  pos += vec3(-1.0,1.0,0.0);\r\n\r\n  //dom position (windowは(-1.0,-1.0)-(1.0,1.0)なので *2 が必要)\r\n  pos += vec3(domPos.x / windowSize.x * 2.0,-domPos.y / windowSize.y * 2.0,0.0);\r\n\r\n  gl_Position = vec4(pos, 1.0);\r\n  vUv = uv;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D backbuffer;\r\nuniform vec2 resolution;\r\nvarying vec2 vUv;\r\n\r\nuniform float threshold;\r\n\r\nvoid main(){\r\n\tvec3 c = texture2D(backbuffer,vUv).xyz;\r\n\tfloat h = c.x + c.y + c.z - threshold * 3.0;\r\n\t// h = step(0.0,h);\r\n\tgl_FragColor = vec4(vec3(h * 1.0),1.0);\r\n}"},function(e){e.exports={name:"ore-three-ts",version:"0.1.0",description:"Three.js utils.",main:"build/ore-three.js",scripts:{dev:"webpack-dev-server --watch-content-base --config ./webpack/dev.config.js",build:"npm run build:module && npm run build:min && npm run build:types","build:module":"webpack --config ./webpack/build-module.config.js","build:min":"webpack --config ./webpack/build-min.config.js","build:types":"tsc --emitDeclarationOnly"},repository:{type:"git",url:"git@github.com:ukonpower/ore-three-ts.git"},keywords:["threejs","webgl"],types:"./types/index.d.ts",files:["build","src","types"],author:"ukonpower",bugs:{url:"https://github.com/ukonpower/ore-three-ts/issues"},license:"MIT",devDependencies:{"shader-loader":"^1.3.1","ts-loader":"^6.0.0",typescript:"^3.4.5",webpack:"^4.30.0","webpack-cli":"^3.3.2","webpack-dev-server":"^3.3.1","webpack-merge":"^4.2.1"},dependencies:{three:"^0.105.0"}}},function(e,t,r){"use strict";r.r(t);var n=r(0),i=r(8).version,o=function(){function e(e){console.log("%c- Welcome to Ore-Three "+i+" -","padding: 5px 10px ;background-color: black; color: white;font-size:11px"),console.log("%c↓↓ THANKS TO THIS POWERFULL ENGINE!!","padding: 2px 2px ;background-color: black; color: white; font-size:5px"),this.currentScene,this.canvas=e.canvas,this.renderer=new n.WebGLRenderer({canvas:this.canvas,alpha:!!e.alpha&&e.alpha}),this.renderer.debug.checkShaderErrors=!0,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(e.retina?window.devicePixelRatio:1),window.addEventListener("orientationchange",this.onOrientationDevice.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this)),this.animate()}return e.prototype.animate=function(){this.currentScene&&this.currentScene.tick(),requestAnimationFrame(this.animate.bind(this))},e.prototype.setScene=function(e){this.currentScene=e},e.prototype.onWindowResize=function(){var e=window.innerWidth,t=window.innerHeight;this.renderer.setSize(e,t),this.currentScene&&this.currentScene.onResize(e,t)},e.prototype.onOrientationDevice=function(){this.onWindowResize()},e}(),s=function(){function e(){var e=navigator.userAgent;e.indexOf("iPhone")>=0||e.indexOf("iPad")>=0||e.indexOf("Android")>=0?(window.addEventListener("touchstart",this._TouchStart.bind(this)),window.addEventListener("touchmove",this._TouchMove.bind(this),{passive:!1}),window.addEventListener("touchend",this._TouchEnd.bind(this))):(window.addEventListener("mousedown",this._TouchStart.bind(this)),window.addEventListener("mousemove",this._TouchMove.bind(this)),window.addEventListener("mouseup",this._TouchEnd.bind(this)),window.addEventListener("dragend",this._TouchEnd.bind(this)),window.addEventListener("wheel",this.wheel.bind(this),{passive:!1})),this._x=-1,this._y=-1,this._touchDown=!1}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){-1==this._x?this.deltaX=0:this.deltaX=e-this._x,this._x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){-1==this._y?this.deltaY=0:this.deltaY=e-this._y,this._y=e},enumerable:!0,configurable:!0}),e.prototype._TouchStart=function(e){e.touches?(this.x=e.touches[0].clientX+window.pageXOffset,this.y=e.touches[0].clientY+window.pageYOffset):0==e.button&&(this.x=e.pageX,this.y=e.pageY),this._touchDown=!0,this.onTouchStart&&this.onTouchStart(e)},e.prototype._TouchMove=function(e){this._touchDown&&(e.touches?(this.x=e.touches[0].clientX+window.pageXOffset,this.y=e.touches[0].clientY+window.pageYOffset):(this.x=e.pageX,this.y=e.pageY),this.onTouchMove&&this.onTouchMove(e))},e.prototype._TouchEnd=function(){this._touchDown&&(this._touchDown=!1,this._x=-1,this._y=-1,this.onTouchEnd&&this.onTouchEnd(event),this.deltaX=0,this.deltaY=0)},e.prototype.wheel=function(e){this.onWheel&&this.onWheel(e)},e}(),a=function(){function e(e){this.time=0,this.deltaTime=0,this.renderer=e,this.name=name,this.scene=new n.Scene,this.clock=new n.Clock,this.camera=new n.PerspectiveCamera(50,innerWidth/innerHeight,.1,1e3),this.cursor=new s,this.cursor.onTouchStart=this.onTouchStart.bind(this),this.cursor.onTouchMove=this.onTouchMove.bind(this),this.cursor.onTouchEnd=this.onTouchEnd.bind(this),this.cursor.onWheel=this.onWheel.bind(this)}return e.prototype.tick=function(){this.deltaTime=this.clock.getDelta(),this.time+=this.deltaTime,this.animate()},e.prototype.animate=function(){},e.prototype.onResize=function(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix()},e.prototype.onTouchStart=function(e){},e.prototype.onTouchMove=function(e){},e.prototype.onTouchEnd=function(e){},e.prototype.onWheel=function(e){},e}(),u=function(){function e(e){this._pageOffset=0,this.scrollVel=0,this.x=1,this.isAutoMoving=!1,this.element=e,this.rect=this.element.getBoundingClientRect()}return Object.defineProperty(e.prototype,"pageOffset",{get:function(){return this._pageOffset},enumerable:!0,configurable:!0}),e.prototype.resize=function(){this.rect=this.element.getBoundingClientRect()},e.prototype.moveto=function(e,t,r){if(void 0===t&&(t=1),void 0===r&&(r=null),e){if(!this.isAutoMoving){var n=e.getBoundingClientRect().top;this.baseOffset=this.pageOffset,this.x=0,this.scrollVel=0,this.isAutoMoving=!0,this.duration=t,this.scrollDistance=Math.min(n,this.rect.height-(this.pageOffset+window.innerHeight)),this.onAutoMoved=r}}else console.log("target is null.")},e.prototype.setScrollVelocity=function(e){this.isAutoMoving=!1,this.scrollVel=e},e.prototype.update=function(e){if(void 0===e&&(e=null),this.isAutoMoving){this.x+=(e||.016)/this.duration;var t=!1;this.x>=1&&(t=!0,this.x=1);var r=this.sigmoid(6,this.x);this._pageOffset=this.baseOffset+this.scrollDistance*r,t&&(this.onAutoMoved&&this.onAutoMoved(),this.isAutoMoving=!1,this.onAutoMoved=null)}else this._pageOffset+=this.scrollVel,this._pageOffset=Math.min(Math.max(0,this.pageOffset),this.rect.height-window.innerHeight),this.scrollVel*=.95;this.element.style.transform="translate3d(0,"+-this._pageOffset+"px,0)"},e.prototype.sigmoid=function(e,t){var r=Math.exp(-e*(2*t-1)),n=Math.exp(-e);return(1+(1-r)/(1+r)*(1+n)/(1-n))/2},e}(),c=function(){function e(e){this.x=0,this.duration=1,this.isMoving=!1,this.force=!1,this.objPos=e.position,this.objRot=e.rotation,this.setBaseTransform()}return e.prototype.setBaseTransform=function(){this.basePos=this.objPos.clone(),this.baseRot=this.objRot.toVector3()},e.prototype.move=function(e,t,r,i){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=1),!(this.isMoving&&!this.force)&&(e||(e=this.objPos.clone()),t||(t=this.objRot.clone()),i&&(this.onFinish=i),this.duration=r,this.setBaseTransform(),this.goalPos=e.clone(),this.goalRot=t.toVector3(),this.distancePos=(new n.Vector3).subVectors(this.goalPos,this.basePos),this.distanceRot=(new n.Vector3).subVectors(this.goalRot,this.baseRot),this.x=0,this.isMoving=!0,!0)},e.prototype.update=function(e){var t=!1;if(this.isMoving){this.x+=(e||.016)/this.duration,this.x>1&&(this.x=1,t=!0);var r=this.sigmoid(6,this.x);this.objPos.set(this.basePos.x+this.distancePos.x*r,this.basePos.y+this.distancePos.y*r,this.basePos.z+this.distancePos.z*r),this.objRot.set(this.baseRot.x+this.distanceRot.x*r,this.baseRot.y+this.distanceRot.y*r,this.baseRot.z+this.distanceRot.z*r),t&&(this.x=0,this.isMoving=!1,this.onFinish&&this.onFinish())}},e.prototype.sigmoid=function(e,t){var r=Math.exp(-e*(2*t-1)),n=Math.exp(-e);return(1+(1-r)/(1+r)*(1+n)/(1-n))/2},e}(),h=function(){function e(e){this.target=e,this.scrollVel=new n.Vector2}return e.prototype.update=function(){this.scrollVel.multiplyScalar(.96);var e=new n.Vector3(this.scrollVel.y,this.scrollVel.x,0).normalize(),t=(new n.Quaternion).setFromAxisAngle(e,this.scrollVel.length());t.multiply(this.target.quaternion),this.target.quaternion.copy(t)},e.prototype.addVelocity=function(e){this.scrollVel.addVectors(this.scrollVel,e.multiplyScalar(.001))},e}(),l=function(){function e(e,t){this.target=e,this.rotate=new n.Quaternion,this.rotMat=new n.Matrix4,this.scrollVel=new n.Vector2(0,0),this.uniform=t,this.uniform.rotVec={value:this.scrollVel},this.uniform.rotation={value:null}}return e.prototype.update=function(){this.scrollVel.multiplyScalar(.96);var e=new n.Vector3(this.scrollVel.y,this.scrollVel.x,0).normalize(),t=(new n.Quaternion).setFromAxisAngle(e,this.scrollVel.length());t.multiply(this.rotate),this.rotate.copy(t),this.uniform.rotation.value=this.rotMat.compose(new n.Vector3,this.rotate,this.target.scale)},e.prototype.addVelocity=function(e){this.scrollVel.addVectors(this.scrollVel,e.multiplyScalar(.001))},e}(),d=function(){function e(e){this.isLoaded=!1,this.listener=e.listener?e.listener:new n.AudioListener,this.audio=new n.Audio(this.listener),this.bufferSize=e.bufferSize?e.bufferSize:128,this.uniforms=[],e.src&&this.load(e.src)}return Object.defineProperty(e.prototype,"isPlaying",{get:function(){return!!this.audio&&this.audio.isPlaying},enumerable:!0,configurable:!0}),e.prototype.load=function(e){var t=this;this.audio.buffer&&this.audio.stop();var r=new n.AudioLoader;this.isLoaded=!1,this.onLoad=null,r.load(e,function(e){t.audio.setBuffer(e),t.audio.setLoop(!0),t.audio.setVolume(.5),t.analyser=new n.AudioAnalyser(t.audio,t.bufferSize),t.soundData=new n.DataTexture(t.analyser.data,t.bufferSize/2,1,n.LuminanceFormat),t.soundData.needsUpdate=!0,t.isLoaded=!0,t.setUniformData(t.uniforms),t.onLoad&&t.onLoad()},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.log("An error happened: "+e)})},e.prototype.play=function(){var e=this;this.isLoaded?this.audio.play():this.onLoad=function(){e.audio.play()}},e.prototype.pause=function(){this.audio.isPlaying&&this.audio.pause()},e.prototype.registerUniforms=function(e){this.uniforms.push(e),this.setUniformData([e])},e.prototype.setUniformData=function(e){var t=this;e.forEach(function(e){e.audioSpectrum={value:t.soundData},e.audioVolume={value:t.volume}})},e.prototype.update=function(){var e=this;this.analyser&&(this.analyser.getFrequencyData(),this.volume=this.analyser.getAverageFrequency(),this.uniforms.forEach(function(t){t.audioSpectrum.value.needsUpdate=!0,t.audioVolume.value=e.volume}))},e}(),f=r(2),p=r.n(f),v=r(3),m=r.n(v),x=r(4),g=r.n(x);function y(e,t,r){this.variables=[],this.currentTextureIndex=0;var i=new n.Scene,o=new n.Camera;o.position.z=1;var s={texture:{value:null}},a=h("uniform sampler2D texture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( texture, uv );\n\n}\n",s),u=new n.Mesh(new n.PlaneBufferGeometry(2,2),a);function c(r){r.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function h(e,t){t=t||{};var r=new n.ShaderMaterial({uniforms:t,vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:e});return c(r),r}i.add(u),this.addVariable=function(e,t,r){var i={name:e,initialValueTexture:r,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:n.NearestFilter,magFilter:n.NearestFilter};return this.variables.push(i),i},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!r.extensions.get("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===r.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(var n=0;n<this.variables.length;n++){var i=this.variables[n];i.renderTargets[0]=this.createRenderTarget(e,t,i.wrapS,i.wrapT,i.minFilter,i.magFilter),i.renderTargets[1]=this.createRenderTarget(e,t,i.wrapS,i.wrapT,i.minFilter,i.magFilter),this.renderTexture(i.initialValueTexture,i.renderTargets[0]),this.renderTexture(i.initialValueTexture,i.renderTargets[1]);var o=i.material,s=o.uniforms;if(null!==i.dependencies)for(var a=0;a<i.dependencies.length;a++){var u=i.dependencies[a];if(u.name!==i.name){for(var c=!1,h=0;h<this.variables.length;h++)if(u.name===this.variables[h].name){c=!0;break}if(!c)return"Variable dependency not found. Variable="+i.name+", dependency="+u.name}s[u.name]={value:null},o.fragmentShader="\nuniform sampler2D "+u.name+";\n"+o.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){for(var e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0,r=0,n=this.variables.length;r<n;r++){var i=this.variables[r];if(null!==i.dependencies)for(var o=i.material.uniforms,s=0,a=i.dependencies.length;s<a;s++){var u=i.dependencies[s];o[u.name].value=u.renderTargets[e].texture}this.doRenderTarget(i.material,i.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=c,this.createShaderMaterial=h,this.createRenderTarget=function(r,i,o,s,a,u){return r=r||e,i=i||t,o=o||n.ClampToEdgeWrapping,s=s||n.ClampToEdgeWrapping,a=a||n.NearestFilter,u=u||n.NearestFilter,new n.WebGLRenderTarget(r,i,{wrapS:o,wrapT:s,minFilter:a,magFilter:u,format:n.RGBAFormat,type:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?n.HalfFloatType:n.FloatType,stencilBuffer:!1,depthBuffer:!1})},this.createTexture=function(){var r=new Float32Array(e*t*4),i=new n.DataTexture(r,e,t,n.RGBAFormat,n.FloatType);return i.needsUpdate=!0,i},this.renderTexture=function(e,t){s.texture.value=e,this.doRenderTarget(a,t),s.texture.value=null},this.doRenderTarget=function(e,t){var n=r.getRenderTarget();u.material=e,r.setRenderTarget(t),r.render(i,o),u.material=a,r.setRenderTarget(n)}}var w,b=(w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),T=function(e){function t(t,r,n,i){void 0===i&&(i=null);var o=e.call(this)||this;return o.renderer=t,o.computeRenderer,o.num=r,o.length=n,o.fragment=null!=i?i:m.a,o.comTexs={position:{texture:null,uniforms:null},velocity:{texture:null,uniforms:null}},o.renderer.extensions.get("OES_texture_float")?(o.initComputeRenderer(),o.createTrails()):console.log("No OES_texture_float support for float textures."),o}return b(t,e),t.prototype.initComputeRenderer=function(){if(this.computeRenderer=new y(this.length,this.num,this.renderer),null==this.computeRenderer)return!1;var e=this.computeRenderer.createTexture(),t=this.computeRenderer.createTexture();return this.initPosition(e),this.comTexs.position.texture=this.computeRenderer.addVariable("texturePosition",p.a,e),this.comTexs.velocity.texture=this.computeRenderer.addVariable("textureVelocity",this.fragment,t),this.computeRenderer.setVariableDependencies(this.comTexs.position.texture,[this.comTexs.position.texture,this.comTexs.velocity.texture]),this.comTexs.position.uniforms=this.comTexs.position.texture.material.uniforms,this.computeRenderer.setVariableDependencies(this.comTexs.velocity.texture,[this.comTexs.position.texture,this.comTexs.velocity.texture]),this.comTexs.velocity.uniforms=this.comTexs.velocity.texture.material.uniforms,this.comTexs.velocity.uniforms.time={value:0},this.comTexs.velocity.uniforms.seed={value:100*Math.random()},this.comTexs.velocity.uniforms.avoidPos={value:new n.Vector3(0,0,0)},this.computeRenderer.init(),!0},t.prototype.initPosition=function(e){for(var t=e.image.data,r=new n.Vector3(25,25,25),i=0;i<t.length;i+=4*this.length)for(var o=Math.random()*r.x-r.x/2,s=Math.random()*r.y-r.y/2,a=Math.random()*r.z-r.z/2,u=0;u<4*this.length;u+=4)t[i+u+0]=o-30,t[i+u+1]=s+20,t[i+u+2]=a,t[i+u+3]=0},t.prototype.createTrails=function(){for(var e=new n.InstancedBufferGeometry,t=[],r=[],i=[],o=[],s=[],a=0;a<this.length;a++)for(var u=a,c=0;c<10;c++){var h=2*Math.PI/10*c,l=.1*Math.cos(h),d=.1*Math.sin(h);0,t.push(l),t.push(d),t.push(0);var f=new n.Vector3(l,d,0);f.normalize(),i.push(f.x,f.y,f.z),o.push(a/this.length);var p=10*u+c;a>0&&(r.push(p),r.push(10*(u-1)+(c+1)%10),r.push(10*u+(c+1)%10),r.push(p),r.push(p-10),r.push(10*(u-1)+(c+1)%10))}var v=new Float32Array(t),m=new Float32Array(i),x=new Uint32Array(r),y=new Float32Array(o);e.addAttribute("position",new n.BufferAttribute(v,3)),e.addAttribute("uvx",new n.BufferAttribute(y,1)),e.addAttribute("normal",new n.BufferAttribute(m,3)),e.setIndex(new n.BufferAttribute(x,1));for(var w=0;w<this.num;w++)s.push(w/this.num);var b=new Float32Array(s);e.addAttribute("uvy",new n.InstancedBufferAttribute(b,1,!1,1));var T=n.ShaderLib.standard;this.uni=n.UniformsUtils.merge([T.uniforms,{texturePosition:{value:null},textureVelocity:{value:null}}]);var S=new n.ShaderMaterial({uniforms:this.uni,vertexShader:g.a,fragmentShader:T.fragmentShader,lights:!0,flatShading:!0}),z=new n.Mesh(e,S);z.matrixAutoUpdate=!1,z.updateMatrix(),this.add(z)},t.prototype.update=function(e){this.computeRenderer.compute(),this.comTexs.velocity.uniforms.time.value=e,this.uni.texturePosition.value=this.computeRenderer.getCurrentRenderTarget(this.comTexs.position.texture).texture,this.uni.textureVelocity.value=this.computeRenderer.getCurrentRenderTarget(this.comTexs.velocity.texture).texture},t.prototype.setAvoidObje=function(e,t){this.comTexs.velocity.uniforms.avoidPos.value=e,this.comTexs.velocity.uniforms.avoidScale.value=t},t.prototype.setCamY=function(e){this.comTexs.velocity.uniforms.camY.value=e},t}(n.Object3D),S=r(5),z=r.n(S),P=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_=function(e){function t(t,r){var n=e.call(this)||this;return n.frag=t,n.uni=r,n.createMesh(),n}return P(t,e),t.prototype.createMesh=function(){var e=new n.BufferGeometry,t=[],r=[],i=[];t.push(-1,1,0),t.push(1,1,0),t.push(1,-1,0),t.push(-1,-1,0),i.push(0,1),i.push(1,1),i.push(1,0),i.push(0,0),r.push(0,2,1,0,3,2);var o=new Float32Array(t),s=new Uint32Array(r),a=new Float32Array(i);e.addAttribute("position",new n.BufferAttribute(o,3)),e.addAttribute("uv",new n.BufferAttribute(a,2)),e.setIndex(new n.BufferAttribute(s,1));var u=new n.ShaderMaterial({uniforms:this.uni,fragmentShader:this.frag,vertexShader:z.a,transparent:!0});this.add(new n.Mesh(e,u))},t}(n.Object3D),M=function(){function e(e,t){var r=this;this.renderer=e,this.resolution=new n.Vector2,this.renderer.getSize(this.resolution),this.resolution.multiplyScalar(this.renderer.getPixelRatio()),this.scene=new n.Scene,this.camera=new n.OrthographicCamera(-1,1,1,-1,0,1),this.screenMesh=new n.Mesh(new n.PlaneGeometry(2,2),null),this.scene.add(this.screenMesh),this.initRenderTargets(),t.forEach(function(e){e.uniforms||(e.uniforms={}),e.uniforms.backbuffer={value:null},e.uniforms.resolution={value:r.resolution};var t={material:new n.ShaderMaterial({uniforms:e.uniforms,vertexShader:"varying vec2 vUv; void main() { vUv = uv; gl_Position = vec4( position, 1.0 ); } ",fragmentShader:e.fragmentShader}),uniforms:e.uniforms};r.effectMaterials?r.effectMaterials.push(t):r.effectMaterials=[t]})}return e.prototype.initRenderTargets=function(){this.readBuffer=this.createRenderTarget(),this.writeBuffer=this.createRenderTarget()},e.prototype.createRenderTarget=function(){return new n.WebGLRenderTarget(this.resolution.x,this.resolution.y)},e.prototype.swapBuffers=function(){var e=this.writeBuffer;this.writeBuffer=this.readBuffer,this.readBuffer=e},e.prototype.render=function(e,t,r){var n=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===r&&(r=!1);var i=!1,o=!1;"Scene"==e.type?(this.renderer.setRenderTarget(this.readBuffer),this.renderer.render(e,t),i=r):"boolean"==typeof e?i=e:(this.effectMaterials[0].uniforms.backbuffer.value=e,o=!0,i=t),this.effectMaterials.forEach(function(e,t){n.screenMesh.material=e.material,(!o||t>0)&&(e.uniforms.backbuffer.value=n.readBuffer.texture),t<n.effectMaterials.length-1||i?n.renderer.setRenderTarget(n.writeBuffer):n.renderer.setRenderTarget(null),n.renderer.render(n.scene,n.camera),n.swapBuffers()}),this.resultBuffer=i?this.readBuffer:null},e.prototype.getResultTexture=function(){return this.resultBuffer?this.resultBuffer.texture:null},e.prototype.resize=function(e,t){this.readBuffer.setSize(e,t)},e}(),R=r(6),V=r.n(R),A=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O=function(e){function t(t){var r=e.call(this)||this;r.dom=t.dom,r.uni=t.uniforms,r.frag=t.fragmentShader;var i=r.dom.getBoundingClientRect();return r.domPos=new n.Vector2(i.left,i.right),r.domSize=new n.Vector2(i.width,i.height),r.windowSize=new n.Vector2(window.innerWidth,window.innerHeight),r.uni.domPos={value:r.domPos},r.uni.domSize={value:r.domSize},r.uni.windowSize={value:r.windowSize},r.createMesh(),r}return A(t,e),t.prototype.createMesh=function(){var e=new n.PlaneGeometry(2,2,1,1),t=new n.ShaderMaterial({uniforms:this.uni,fragmentShader:this.frag,vertexShader:V.a,transparent:!0}),r=new n.Mesh(e,t);r.frustumCulled=!1,r.position.set(0,0,0),r.rotateY(Math.PI),this.add(r)},t.prototype.updateDom=function(){this.windowSize.set(window.innerWidth,window.innerHeight);var e=this.dom.getBoundingClientRect();this.domSize.set(e.width,e.height),this.domPos.set(e.left,e.top)},t}(n.Object3D),F=r(7),D=r.n(F),C=r(1),j=r.n(C),B=function(){function e(e){this.renderer=e,this.init()}return e.prototype.init=function(){new n.SphereGeometry(.8,30,20);new n.MeshStandardMaterial({color:new n.Color(16777215),roughness:.2}).flatShading=!0,this.gaussVar={value:500},this.sceneTex={value:null};var e=[{fragmentShader:D.a,uniforms:{threshold:{value:.8}}}],t=[{fragmentShader:j.a,uniforms:{v:{value:!1},gaussVar:this.gaussVar}},{fragmentShader:j.a,uniforms:{v:{value:!0},gaussVar:this.gaussVar,sceneTex:this.sceneTex}}];this.pp1=new M(this.renderer,e),this.pp2=new M(this.renderer,t),this.sceneRenderTarget=this.pp1.createRenderTarget()},e.prototype.render=function(e,t){this.renderer.setRenderTarget(this.sceneRenderTarget),this.renderer.render(e,t),this.pp1.render(this.sceneRenderTarget.texture,!0);var r=this.pp1.getResultTexture();this.sceneTex.value=this.sceneRenderTarget.texture,this.pp2.render(r,!1)},e}();r.d(t,"Controller",function(){return o}),r.d(t,"BaseScene",function(){return a}),r.d(t,"Cursor",function(){return s}),r.d(t,"PageScroller",function(){return u}),r.d(t,"TransformAnimator",function(){return c}),r.d(t,"MouseRotator",function(){return h}),r.d(t,"MouseVertexRotator",function(){return l}),r.d(t,"AudioPlayer",function(){return d}),r.d(t,"Fish",function(){return T}),r.d(t,"Background",function(){return _}),r.d(t,"PostProcessing",function(){return M}),r.d(t,"DomGLSL",function(){return O}),r.d(t,"BloomFilter",function(){return B})}]);