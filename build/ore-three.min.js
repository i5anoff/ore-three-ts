window.ORE=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){e.exports=window.THREE},function(e,t){e.exports="varying vec2 vUv;\nuniform sampler2D backbuffer;\nuniform vec2 resolution;\n\nuniform bool v;\nuniform float gaussVar;\nuniform sampler2D sceneTex;\n\n#define PI 3.14159265\n#define SAMPLES 32\n\nfloat gaussian( float x, float v ) {\n    return 1.0 / sqrt( 2.0 * PI * v ) * exp( - x * x / 2.0 / v );\n}\n\nvoid main(){\n\tvec2 bv = ( v ? vec2( 0.0, 1.0 ) : vec2( 1.0, 0.0 ) ) / resolution;\n\tvec3 sum = vec3( 0.0  );\n\tfor( int i = 0; i < SAMPLES; i++ ){\n\t\tvec3 t1 = texture2D( backbuffer, vUv + bv * float(i) ).xyz;\n\t\tvec3 t2 = texture2D( backbuffer, vUv - bv * float(i) ).xyz;\n\t\tfloat mul = gaussian( float ( i ), gaussVar ); \n\t\tsum += (t1 + t2) * mul * 1.0;\n\t}\n\n\tif(v){\n\t\tsum += texture2D( sceneTex, vUv ).xyz;\n\t}\n\n\tgl_FragColor = vec4( sum, 1.0);\n}"},function(e,t){e.exports="void main() {\n    if(gl_FragCoord.x <= 1.0){\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\n        vec3 pos = texture2D( texturePosition, uv ).xyz;\n        vec3 vel = texture2D( textureVelocity, uv ).xyz;\n\n        pos += vel * 0.01;\n        gl_FragColor = vec4(pos,1.0);\n        \n    }else{\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\n        vec2 bUV = (gl_FragCoord.xy - vec2(1.0,0.0)) / resolution.xy;\n        vec3 bPos = texture2D( texturePosition, bUV ).xyz;;\n        gl_FragColor = vec4(bPos,1.0);\n    }\n}"},function(e,t){e.exports="uniform float time;\nuniform float seed;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex \n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n  }\n\t\t\t\t\t\t\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\nvoid main() {\n    if(gl_FragCoord.x >= 1.0) return;    \n    \n    vec2 uv = gl_FragCoord.xy / resolution.xy;\n    vec3 pos = texture2D( texturePosition, uv ).xyz;\n    vec3 vel = texture2D( textureVelocity, uv ).xyz;\n    float idParticle = uv.y * resolution.x + uv.x;\n    float scale = 0.08;\n    \n    vel.xyz += 40.0 * vec3(\n      snoise( vec4( scale * pos.xyz, 7.225 * seed * 200.0 + 0.4 * time ) ),\n      snoise( vec4( scale * pos.xyz, 3.553 * seed + 0.4 * time ) ),\n      snoise( vec4( scale * pos.xyz, 1.259 * seed * 10.0 + 0.4 * time ) )\n    ) * 0.05;\n\n    vec3 gpos = pos - vec3(0.0,0.0,0.0);\n    vel += -(gpos)* length(gpos) * 0.005;\n\n    vel.xyz *= 0.9 + abs(sin(uv.y * 9.0)) * 0.05;\n\n    gl_FragColor = vec4( vel.xyz, 1.0 );\n}"},function(e,t){e.exports="varying vec3 vViewPosition;\nattribute float uvx;\nattribute float uvy;\nuniform sampler2D texturePosition;\nuniform float camY;\n\nfloat PI = 3.14159265;\n\nfloat atan2(float y, float x)\n{\n    return x == 0.0 ? sign(y) * PI / 2.0 : atan(y, x);\n}\n\nmat2 rotate(float rad){\n    return mat2(cos(rad),sin(rad),-sin(rad),cos(rad));\n}\n\nvoid main() {\n    vec2 nUV = vec2(uvx,uvy) + vec2(1.0,0.0);\n    \n    if(nUV.x >= 1.0){\n        nUV = vec2(uvx,uvy) - vec2(1.0,0.0);\n    }\n\n    vec3 p = position * 0.3;\n    vec3 pos = texture2D( texturePosition, vec2(uvx,uvy)).xyz;\n    vec3 nPos = texture2D( texturePosition, nUV).xyz;\n\n    vec3 vec = normalize(nPos - pos);\n    float rotX = atan2(vec.y,vec.z);\n\n    p.xy *= sin(uvx * PI) * (sin(uvy * PI) * 1.0 + 0.1);\n    p.yz *= rotate(rotX);\n\n    vec4 mvPosition = modelViewMatrix * vec4(p + pos, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n\n    vViewPosition = -mvPosition.xyz;\n}\n\n\n"},function(e,t){e.exports="varying vec2 vUv;\n\nvoid main() {\n    vec3 pos = position;\n    pos.z = 1.0;\n    gl_Position = vec4(pos,1.0);\n    vUv = uv;\n}\n\n\n"},function(e,t){e.exports="varying vec2 vUv;\nuniform vec2 domPos;\nuniform vec2 domSize;\nuniform vec2 windowSize;\nuniform float time;\n\nvoid main()\n{\n  float aspect = windowSize.x / windowSize.y;\n  float width = domSize.x / windowSize.x;\n\n  //左上(0,0)に\n  vec3 pos = position + vec3(1.0,-1.0,0.0);\n\n  //size\n  pos.x *= width;\n  pos.y *= (width * aspect) * (domSize.y / domSize.x);\n\n  //left top\n  pos += vec3(-1.0,1.0,0.0);\n\n  //dom position (windowは(-1.0,-1.0)-(1.0,1.0)なので *2 が必要)\n  pos += vec3(domPos.x / windowSize.x * 2.0,-domPos.y / windowSize.y * 2.0,0.0);\n\n  gl_Position = vec4(pos, 1.0);\n  vUv = uv;\n}\n"},function(e,t){e.exports="uniform sampler2D backbuffer;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform float threshold;\n\nvoid main(){\n\tvec3 c = texture2D(backbuffer,vUv).xyz;\n\tfloat h = c.x + c.y + c.z - threshold * 3.0;\n\t// h = step(0.0,h);\n\tgl_FragColor = vec4(vec3(h * 1.0),1.0);\n}"},function(e){e.exports={name:"ore-three-ts",version:"0.0.9",description:"Three.js utils.",main:"build/ore-three.js",scripts:{dev:"webpack-dev-server --watch-content-base --config ./webpack/dev.config.js",build:"npm run build:module && npm run build:min && npm run build:types","build:module":"webpack --config ./webpack/build-module.config.js","build:min":"webpack --config ./webpack/build-min.config.js","build:types":"tsc --emitDeclarationOnly"},repository:{type:"git",url:"git@github.com:ukonpower/ore-three-ts.git"},keywords:["threejs","webgl"],types:"./types/index.d.ts",files:["build","src","types"],author:"ukonpower",bugs:{url:"https://github.com/ukonpower/ore-three-ts/issues"},license:"MIT",devDependencies:{"shader-loader":"^1.3.1","ts-loader":"^6.0.0",typescript:"^3.4.5",webpack:"^4.30.0","webpack-cli":"^3.3.2","webpack-dev-server":"^3.3.1","webpack-merge":"^4.2.1"},dependencies:{three:"^0.104.0"}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(8).version,o=function(){function e(e){console.log("%c- Welcome to Ore-Three "+r+" -","padding: 5px 10px ;background-color: black; color: white;font-size:11px"),console.log("%c↓↓ THANKS TO THIS POWERFULL ENGINE!!","padding: 2px 2px ;background-color: black; color: white; font-size:5px"),this.currentScene,this.canvas=e.canvas,this.renderer=new i.WebGLRenderer({canvas:this.canvas,alpha:!!e.alpha&&e.alpha}),this.renderer.debug.checkShaderErrors=!0,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(e.retina?window.devicePixelRatio:1),window.addEventListener("orientationchange",this.onOrientationDevice.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this)),this.animate()}return e.prototype.animate=function(){this.currentScene&&this.currentScene.tick(),requestAnimationFrame(this.animate.bind(this))},e.prototype.setScene=function(e){this.currentScene=e},e.prototype.onWindowResize=function(){var e=window.innerWidth,t=window.innerHeight;this.renderer.setSize(e,t),this.currentScene&&this.currentScene.onResize(e,t)},e.prototype.onOrientationDevice=function(){this.onWindowResize()},e}(),s=function(){function e(){var e=navigator.userAgent;e.indexOf("iPhone")>=0||e.indexOf("iPad")>=0||e.indexOf("Android")>=0?(window.addEventListener("touchstart",this._TouchStart.bind(this)),window.addEventListener("touchmove",this._TouchMove.bind(this),{passive:!1}),window.addEventListener("touchend",this._TouchEnd.bind(this))):(window.addEventListener("mousedown",this._TouchStart.bind(this)),window.addEventListener("mousemove",this._TouchMove.bind(this)),window.addEventListener("mouseup",this._TouchEnd.bind(this)),window.addEventListener("dragend",this._TouchEnd.bind(this)),window.addEventListener("wheel",this.wheel.bind(this),{passive:!1})),this._x=-1,this._y=-1,this._touchDown=!1}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){-1==this._x?this.deltaX=0:this.deltaX=e-this._x,this._x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){-1==this._y?this.deltaY=0:this.deltaY=e-this._y,this._y=e},enumerable:!0,configurable:!0}),e.prototype._TouchStart=function(e){if(e.touches)this.x=e.touches[0].clientX+window.pageXOffset,this.y=e.touches[0].clientY+window.pageYOffset;else{if(0!=e.button)return;this.x=e.pageX,this.y=e.pageY}this._touchDown=!0,this.onTouchStart&&this.onTouchStart(e)},e.prototype._TouchMove=function(e){this._touchDown&&(e.touches?(this.x=e.touches[0].clientX+window.pageXOffset,this.y=e.touches[0].clientY+window.pageYOffset):(this.x=e.pageX,this.y=e.pageY),this.onTouchMove&&this.onTouchMove(e))},e.prototype._TouchEnd=function(){this._touchDown&&(this._touchDown=!1,this._x=-1,this._y=-1,this.onTouchEnd&&this.onTouchEnd(event),this.deltaX=0,this.deltaY=0)},e.prototype.wheel=function(e){this.onWheel&&this.onWheel(e)},e}(),a=function(){function e(e){this.time=0,this.deltaTime=0,this.renderer=e,this.name=name,this.scene=new i.Scene,this.clock=new i.Clock,this.camera=new i.PerspectiveCamera(50,innerWidth/innerHeight,.1,1e3),this.cursor=new s,this.cursor.onTouchStart=this.onTouchStart.bind(this),this.cursor.onTouchMove=this.onTouchMove.bind(this),this.cursor.onTouchEnd=this.onTouchEnd.bind(this),this.cursor.onWheel=this.onWheel.bind(this)}return e.prototype.tick=function(){this.deltaTime=this.clock.getDelta(),this.time+=this.deltaTime,this.animate()},e.prototype.animate=function(){},e.prototype.onResize=function(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix()},e.prototype.onTouchStart=function(e){},e.prototype.onTouchMove=function(e){},e.prototype.onTouchEnd=function(e){},e.prototype.onWheel=function(e){},e}(),u=function(){function e(e){this._pageOffset=0,this.scrollVel=0,this.x=1,this.isAutoMoving=!1,this.element=e,this.rect=this.element.getBoundingClientRect()}return Object.defineProperty(e.prototype,"pageOffset",{get:function(){return this._pageOffset},enumerable:!0,configurable:!0}),e.prototype.resize=function(){this.rect=this.element.getBoundingClientRect()},e.prototype.moveto=function(e,t,n){if(void 0===t&&(t=1),void 0===n&&(n=null),e){if(!this.isAutoMoving){var i=e.getBoundingClientRect().top;this.baseOffset=this.pageOffset,this.x=0,this.scrollVel=0,this.isAutoMoving=!0,this.duration=t,this.scrollDistance=Math.min(i,this.rect.height-(this.pageOffset+window.innerHeight)),this.onAutoMoved=n}}else console.log("target is null.")},e.prototype.setScrollVelocity=function(e){this.isAutoMoving=!1,this.scrollVel=e},e.prototype.update=function(e){if(void 0===e&&(e=null),this.isAutoMoving){this.x+=(e||.016)/this.duration;var t=!1;this.x>=1&&(t=!0,this.x=1);var n=this.sigmoid(6,this.x);this._pageOffset=this.baseOffset+this.scrollDistance*n,t&&(this.onAutoMoved&&this.onAutoMoved(),this.isAutoMoving=!1,this.onAutoMoved=null)}else this._pageOffset+=this.scrollVel,this._pageOffset=Math.min(Math.max(0,this.pageOffset),this.rect.height-window.innerHeight),this.scrollVel*=.95;this.element.style.transform="translate3d(0,"+-this._pageOffset+"px,0)"},e.prototype.sigmoid=function(e,t){var n=Math.exp(-e*(2*t-1)),i=Math.exp(-e);return(1+(1-n)/(1+n)*(1+i)/(1-i))/2},e}(),c=function(){function e(e){this.x=0,this.duration=1,this.isMoving=!1,this.force=!1,this.objPos=e.position,this.objRot=e.rotation,this.setBaseTransform()}return e.prototype.setBaseTransform=function(){this.basePos=this.objPos.clone(),this.baseRot=this.objRot.toVector3()},e.prototype.move=function(e,t,n,r){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=1),!(this.isMoving&&!this.force)&&(e||(e=this.objPos.clone()),t||(t=this.objRot.clone()),r&&(this.onFinish=r),this.duration=n,this.setBaseTransform(),this.goalPos=e.clone(),this.goalRot=t.toVector3(),this.distancePos=(new i.Vector3).subVectors(this.goalPos,this.basePos),this.distanceRot=(new i.Vector3).subVectors(this.goalRot,this.baseRot),this.x=0,this.isMoving=!0,!0)},e.prototype.update=function(e){var t=!1;if(this.isMoving){this.x+=(e||.016)/this.duration,this.x>1&&(this.x=1,t=!0);var n=this.sigmoid(6,this.x);this.objPos.set(this.basePos.x+this.distancePos.x*n,this.basePos.y+this.distancePos.y*n,this.basePos.z+this.distancePos.z*n),this.objRot.set(this.baseRot.x+this.distanceRot.x*n,this.baseRot.y+this.distanceRot.y*n,this.baseRot.z+this.distanceRot.z*n),t&&(this.x=0,this.isMoving=!1,this.onFinish&&this.onFinish())}},e.prototype.sigmoid=function(e,t){var n=Math.exp(-e*(2*t-1)),i=Math.exp(-e);return(1+(1-n)/(1+n)*(1+i)/(1-i))/2},e}(),h=function(){function e(e){this.target=e,this.scrollVel=new i.Vector2}return e.prototype.update=function(){this.scrollVel.multiplyScalar(.96);var e=new i.Vector3(this.scrollVel.y,this.scrollVel.x,0).normalize(),t=(new i.Quaternion).setFromAxisAngle(e,this.scrollVel.length());t.multiply(this.target.quaternion),this.target.quaternion.copy(t)},e.prototype.addVelocity=function(e){this.scrollVel.addVectors(this.scrollVel,e.multiplyScalar(.001))},e}(),l=function(){function e(e){this.isLoaded=!1,this.listener=e.listener?e.listener:new i.AudioListener,this.bufferSize=e.bufferSize?e.bufferSize:128,e.src&&this.load(e.src)}return e.prototype.load=function(e){var t=this;(new i.AudioLoader).load(e,function(e){t.audio.setBuffer(e),t.audio.setLoop(!0),t.audio.setVolume(.5),t.analyser=new i.AudioAnalyser(t.audio,t.bufferSize),t.soundData=new i.DataTexture(t.analyser.data,t.bufferSize/2,1,i.LuminanceFormat),t.isLoaded=!0,t.onLoad&&t.onLoad()},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.log("An error happened: "+e)})},e.prototype.play=function(){var e=this;this.isLoaded?this.audio.play():this.onLoad=function(){e.audio.play()}},e.prototype.pause=function(){this.audio.isPlaying&&this.audio.pause()},e.prototype.registerUniforms=function(e){var t=this;e.forEach(function(e){e.soundData={value:t.soundData}})},e}(),d=n(2),f=n.n(d),p=n(3),v=n.n(p),x=n(4),m=n.n(x);function g(e,t,n){this.variables=[],this.currentTextureIndex=0;var r=new i.Scene,o=new i.Camera;o.position.z=1;var s={texture:{value:null}},a=h("uniform sampler2D texture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( texture, uv );\n\n}\n",s),u=new i.Mesh(new i.PlaneBufferGeometry(2,2),a);function c(n){n.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function h(e,t){t=t||{};var n=new i.ShaderMaterial({uniforms:t,vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:e});return c(n),n}r.add(u),this.addVariable=function(e,t,n){var r={name:e,initialValueTexture:n,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:i.NearestFilter,magFilter:i.NearestFilter};return this.variables.push(r),r},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!n.extensions.get("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===n.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(var i=0;i<this.variables.length;i++){var r=this.variables[i];r.renderTargets[0]=this.createRenderTarget(e,t,r.wrapS,r.wrapT,r.minFilter,r.magFilter),r.renderTargets[1]=this.createRenderTarget(e,t,r.wrapS,r.wrapT,r.minFilter,r.magFilter),this.renderTexture(r.initialValueTexture,r.renderTargets[0]),this.renderTexture(r.initialValueTexture,r.renderTargets[1]);var o=r.material,s=o.uniforms;if(null!==r.dependencies)for(var a=0;a<r.dependencies.length;a++){var u=r.dependencies[a];if(u.name!==r.name){for(var c=!1,h=0;h<this.variables.length;h++)if(u.name===this.variables[h].name){c=!0;break}if(!c)return"Variable dependency not found. Variable="+r.name+", dependency="+u.name}s[u.name]={value:null},o.fragmentShader="\nuniform sampler2D "+u.name+";\n"+o.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){for(var e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0,n=0,i=this.variables.length;n<i;n++){var r=this.variables[n];if(null!==r.dependencies)for(var o=r.material.uniforms,s=0,a=r.dependencies.length;s<a;s++){var u=r.dependencies[s];o[u.name].value=u.renderTargets[e].texture}this.doRenderTarget(r.material,r.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=c,this.createShaderMaterial=h,this.createRenderTarget=function(n,r,o,s,a,u){return n=n||e,r=r||t,o=o||i.ClampToEdgeWrapping,s=s||i.ClampToEdgeWrapping,a=a||i.NearestFilter,u=u||i.NearestFilter,new i.WebGLRenderTarget(n,r,{wrapS:o,wrapT:s,minFilter:a,magFilter:u,format:i.RGBAFormat,type:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?i.HalfFloatType:i.FloatType,stencilBuffer:!1,depthBuffer:!1})},this.createTexture=function(){var n=new Float32Array(e*t*4),r=new i.DataTexture(n,e,t,i.RGBAFormat,i.FloatType);return r.needsUpdate=!0,r},this.renderTexture=function(e,t){s.texture.value=e,this.doRenderTarget(a,t),s.texture.value=null},this.doRenderTarget=function(e,t){var i=n.getRenderTarget();u.material=e,n.setRenderTarget(t),n.render(r,o),u.material=a,n.setRenderTarget(i)}}var y,w=(y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=function(e){function t(t,n,i,r){void 0===r&&(r=null);var o=e.call(this)||this;return o.renderer=t,o.computeRenderer,o.num=n,o.length=i,o.fragment=null!=r?r:v.a,o.comTexs={position:{texture:null,uniforms:null},velocity:{texture:null,uniforms:null}},o.renderer.extensions.get("OES_texture_float")?(o.initComputeRenderer(),o.createTrails()):console.log("No OES_texture_float support for float textures."),o}return w(t,e),t.prototype.initComputeRenderer=function(){if(this.computeRenderer=new g(this.length,this.num,this.renderer),null==this.computeRenderer)return!1;var e=this.computeRenderer.createTexture(),t=this.computeRenderer.createTexture();return this.initPosition(e),this.comTexs.position.texture=this.computeRenderer.addVariable("texturePosition",f.a,e),this.comTexs.velocity.texture=this.computeRenderer.addVariable("textureVelocity",this.fragment,t),this.computeRenderer.setVariableDependencies(this.comTexs.position.texture,[this.comTexs.position.texture,this.comTexs.velocity.texture]),this.comTexs.position.uniforms=this.comTexs.position.texture.material.uniforms,this.computeRenderer.setVariableDependencies(this.comTexs.velocity.texture,[this.comTexs.position.texture,this.comTexs.velocity.texture]),this.comTexs.velocity.uniforms=this.comTexs.velocity.texture.material.uniforms,this.comTexs.velocity.uniforms.time={value:0},this.comTexs.velocity.uniforms.seed={value:100*Math.random()},this.comTexs.velocity.uniforms.avoidPos={value:new i.Vector3(0,0,0)},this.computeRenderer.init(),!0},t.prototype.initPosition=function(e){for(var t=e.image.data,n=new i.Vector3(25,25,25),r=0;r<t.length;r+=4*this.length)for(var o=Math.random()*n.x-n.x/2,s=Math.random()*n.y-n.y/2,a=Math.random()*n.z-n.z/2,u=0;u<4*this.length;u+=4)t[r+u+0]=o-30,t[r+u+1]=s+20,t[r+u+2]=a,t[r+u+3]=0},t.prototype.createTrails=function(){for(var e=new i.InstancedBufferGeometry,t=[],n=[],r=[],o=[],s=[],a=0;a<this.length;a++)for(var u=a,c=0;c<10;c++){var h=2*Math.PI/10*c,l=.1*Math.cos(h),d=.1*Math.sin(h);0,t.push(l),t.push(d),t.push(0);var f=new i.Vector3(l,d,0);f.normalize(),r.push(f.x,f.y,f.z),o.push(a/this.length);var p=10*u+c;a>0&&(n.push(p),n.push(10*(u-1)+(c+1)%10),n.push(10*u+(c+1)%10),n.push(p),n.push(p-10),n.push(10*(u-1)+(c+1)%10))}var v=new Float32Array(t),x=new Float32Array(r),g=new Uint32Array(n),y=new Float32Array(o);e.addAttribute("position",new i.BufferAttribute(v,3)),e.addAttribute("uvx",new i.BufferAttribute(y,1)),e.addAttribute("normal",new i.BufferAttribute(x,3)),e.setIndex(new i.BufferAttribute(g,1));for(var w=0;w<this.num;w++)s.push(w/this.num);var b=new Float32Array(s);e.addAttribute("uvy",new i.InstancedBufferAttribute(b,1,!1,1));var T=i.ShaderLib.standard;this.uni=i.UniformsUtils.merge([T.uniforms,{texturePosition:{value:null},textureVelocity:{value:null}}]);var S=new i.ShaderMaterial({uniforms:this.uni,vertexShader:m.a,fragmentShader:T.fragmentShader,lights:!0,flatShading:!0}),z=new i.Mesh(e,S);z.matrixAutoUpdate=!1,z.updateMatrix(),this.add(z)},t.prototype.update=function(e){this.computeRenderer.compute(),this.comTexs.velocity.uniforms.time.value=e,this.uni.texturePosition.value=this.computeRenderer.getCurrentRenderTarget(this.comTexs.position.texture).texture,this.uni.textureVelocity.value=this.computeRenderer.getCurrentRenderTarget(this.comTexs.velocity.texture).texture},t.prototype.setAvoidObje=function(e,t){this.comTexs.velocity.uniforms.avoidPos.value=e,this.comTexs.velocity.uniforms.avoidScale.value=t},t.prototype.setCamY=function(e){this.comTexs.velocity.uniforms.camY.value=e},t}(i.Object3D),T=n(5),S=n.n(T),z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),P=function(e){function t(t,n){var i=e.call(this)||this;return i.frag=t,i.uni=n,i.createMesh(),i}return z(t,e),t.prototype.createMesh=function(){var e=new i.BufferGeometry,t=[],n=[],r=[];t.push(-1,1,0),t.push(1,1,0),t.push(1,-1,0),t.push(-1,-1,0),r.push(0,1),r.push(1,1),r.push(1,0),r.push(0,0),n.push(0,2,1,0,3,2);var o=new Float32Array(t),s=new Uint32Array(n),a=new Float32Array(r);e.addAttribute("position",new i.BufferAttribute(o,3)),e.addAttribute("uv",new i.BufferAttribute(a,2)),e.setIndex(new i.BufferAttribute(s,1));var u=new i.ShaderMaterial({uniforms:this.uni,fragmentShader:this.frag,vertexShader:S.a,transparent:!0});this.add(new i.Mesh(e,u))},t}(i.Object3D),_=function(){function e(e,t){var n=this;this.renderer=e,this.resolution=new i.Vector2,this.renderer.getSize(this.resolution),this.resolution.multiplyScalar(this.renderer.getPixelRatio()),this.scene=new i.Scene,this.camera=new i.OrthographicCamera(-1,1,1,-1,0,1),this.screenMesh=new i.Mesh(new i.PlaneGeometry(2,2),null),this.scene.add(this.screenMesh),this.initRenderTargets(),t.forEach(function(e){e.uniforms||(e.uniforms={}),e.uniforms.backbuffer={value:null},e.uniforms.resolution={value:n.resolution};var t={material:new i.ShaderMaterial({uniforms:e.uniforms,vertexShader:"varying vec2 vUv; void main() { vUv = uv; gl_Position = vec4( position, 1.0 ); } ",fragmentShader:e.fragmentShader}),uniforms:e.uniforms};n.effectMaterials?n.effectMaterials.push(t):n.effectMaterials=[t]})}return e.prototype.initRenderTargets=function(){this.readBuffer=this.createRenderTarget(),this.writeBuffer=this.createRenderTarget()},e.prototype.createRenderTarget=function(){return new i.WebGLRenderTarget(this.resolution.x,this.resolution.y)},e.prototype.swapBuffers=function(){var e=this.writeBuffer;this.writeBuffer=this.readBuffer,this.readBuffer=e},e.prototype.render=function(e,t,n){var i=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var r=!1,o=!1;"Scene"==e.type?(this.renderer.setRenderTarget(this.readBuffer),this.renderer.render(e,t),r=n):"boolean"==typeof e?r=e:(this.effectMaterials[0].uniforms.backbuffer.value=e,o=!0,r=t),this.effectMaterials.forEach(function(e,t){i.screenMesh.material=e.material,(!o||t>0)&&(e.uniforms.backbuffer.value=i.readBuffer.texture),t<i.effectMaterials.length-1||r?i.renderer.setRenderTarget(i.writeBuffer):i.renderer.setRenderTarget(null),i.renderer.render(i.scene,i.camera),i.swapBuffers()}),this.resultBuffer=r?this.readBuffer:null},e.prototype.getResultTexture=function(){return this.resultBuffer?this.resultBuffer.texture:null},e.prototype.resize=function(e,t){this.readBuffer.setSize(e,t)},e}(),R=n(6),M=n.n(R),A=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),V=function(e){function t(t){var n=e.call(this)||this;n.dom=t.dom,n.uni=t.uniforms,n.frag=t.fragmentShader;var r=n.dom.getBoundingClientRect();return n.domPos=new i.Vector2(r.left,r.right),n.domSize=new i.Vector2(r.width,r.height),n.windowSize=new i.Vector2(window.innerWidth,window.innerHeight),n.uni.domPos={value:n.domPos},n.uni.domSize={value:n.domSize},n.uni.windowSize={value:n.windowSize},n.createMesh(),n}return A(t,e),t.prototype.createMesh=function(){var e=new i.PlaneGeometry(2,2,1,1),t=new i.ShaderMaterial({uniforms:this.uni,fragmentShader:this.frag,vertexShader:M.a,transparent:!0}),n=new i.Mesh(e,t);n.frustumCulled=!1,n.position.set(0,0,0),n.rotateY(Math.PI),this.add(n)},t.prototype.updateDom=function(){this.windowSize.set(window.innerWidth,window.innerHeight);var e=this.dom.getBoundingClientRect();this.domSize.set(e.width,e.height),this.domPos.set(e.left,e.top)},t}(i.Object3D),O=n(7),F=n.n(O),D=n(1),C=n.n(D),j=function(){function e(e){this.renderer=e,this.init()}return e.prototype.init=function(){new i.SphereGeometry(.8,30,20);new i.MeshStandardMaterial({color:new i.Color(16777215),roughness:.2}).flatShading=!0,this.gaussVar={value:500},this.sceneTex={value:null};var e=[{fragmentShader:F.a,uniforms:{threshold:{value:.8}}}],t=[{fragmentShader:C.a,uniforms:{v:{value:!1},gaussVar:this.gaussVar}},{fragmentShader:C.a,uniforms:{v:{value:!0},gaussVar:this.gaussVar,sceneTex:this.sceneTex}}];this.pp1=new _(this.renderer,e),this.pp2=new _(this.renderer,t),this.sceneRenderTarget=this.pp1.createRenderTarget()},e.prototype.render=function(e,t){this.renderer.setRenderTarget(this.sceneRenderTarget),this.renderer.render(e,t),this.pp1.render(this.sceneRenderTarget.texture,!0);var n=this.pp1.getResultTexture();this.sceneTex.value=this.sceneRenderTarget.texture,this.pp2.render(n,!1)},e}();n.d(t,"Controller",function(){return o}),n.d(t,"BaseScene",function(){return a}),n.d(t,"Cursor",function(){return s}),n.d(t,"PageScroller",function(){return u}),n.d(t,"TransformAnimator",function(){return c}),n.d(t,"MouseRotator",function(){return h}),n.d(t,"AudioPlayer",function(){return l}),n.d(t,"Fish",function(){return b}),n.d(t,"Background",function(){return P}),n.d(t,"PostProcessing",function(){return _}),n.d(t,"DomGLSL",function(){return V}),n.d(t,"BloomFilter",function(){return j})}]);