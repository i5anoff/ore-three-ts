window.ORE=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=15)}([function(e,t){e.exports=window.THREE},function(e,t){e.exports='varying vec2 vUv;\r\nuniform sampler2D backbuffer;\r\nuniform vec2 resolution;\r\n\r\nuniform bool direction;\r\nuniform float gaussVar;\r\n\r\n/*\r\nhttps://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/\r\n\r\nThe MIT License (MIT) Copyright (c) 2015 Jam3\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\r\n\tvec4 color = vec4(0.0);\r\n\tvec2 off1 = vec2(1.3846153846) * direction;\r\n\tvec2 off2 = vec2(3.2307692308) * direction;\r\n\tcolor += texture2D(image, uv) * 0.2270270270;\r\n\tcolor += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\r\n\tcolor += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\r\n\tcolor += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\r\n\tcolor += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\r\n\treturn color;\r\n}\r\n\r\nvoid main(){\r\n\r\n\tvec4 c = blur9(backbuffer,vUv,resolution,direction ? vec2(1.0,0.0) : vec2(0.0, 1.0));\r\n\r\n\tgl_FragColor = c;\r\n}'},function(e,t){e.exports="void main() {\r\n    if(gl_FragCoord.x <= 1.0){\r\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n        vec3 pos = texture2D( texturePosition, uv ).xyz;\r\n        vec3 vel = texture2D( textureVelocity, uv ).xyz;\r\n\r\n        pos += vel * 0.01;\r\n        gl_FragColor = vec4(pos,1.0);\r\n        \r\n    }else{\r\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n        vec2 bUV = (gl_FragCoord.xy - vec2(1.0,0.0)) / resolution.xy;\r\n        vec3 bPos = texture2D( texturePosition, bUV ).xyz;;\r\n        gl_FragColor = vec4(bPos,1.0);\r\n    }\r\n}"},function(e,t){e.exports="uniform float time;\r\nuniform float seed;\r\n\r\n//\r\n// Description : Array and textureless GLSL 2D/3D/4D simplex \r\n//               noise functions.\r\n//      Author : Ian McEwan, Ashima Arts.\r\n//  Maintainer : stegu\r\n//     Lastmod : 20110822 (ijm)\r\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\r\n//               Distributed under the MIT License. See LICENSE file.\r\n//               https://github.com/ashima/webgl-noise\r\n//               https://github.com/stegu/webgl-noise\r\n// \r\n\r\nvec4 mod289(vec4 x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\r\n\r\nfloat mod289(float x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\r\n\r\nvec4 permute(vec4 x) {\r\n     return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nfloat permute(float x) {\r\n     return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec4 taylorInvSqrt(vec4 r)\r\n{\r\n  return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nfloat taylorInvSqrt(float r)\r\n{\r\n  return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nvec4 grad4(float j, vec4 ip)\r\n  {\r\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\r\n  vec4 p,s;\r\n\r\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\r\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\r\n  s = vec4(lessThan(p, vec4(0.0)));\r\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \r\n\r\n  return p;\r\n  }\r\n\t\t\t\t\t\t\r\n// (sqrt(5) - 1)/4 = F4, used once below\r\n#define F4 0.309016994374947451\r\n\r\nfloat snoise(vec4 v)\r\n  {\r\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\r\n                        0.276393202250021,  // 2 * G4\r\n                        0.414589803375032,  // 3 * G4\r\n                       -0.447213595499958); // -1 + 4 * G4\r\n\r\n// First corner\r\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\r\n  vec4 x0 = v -   i + dot(i, C.xxxx);\r\n\r\n// Other corners\r\n\r\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\r\n  vec4 i0;\r\n  vec3 isX = step( x0.yzw, x0.xxx );\r\n  vec3 isYZ = step( x0.zww, x0.yyz );\r\n//  i0.x = dot( isX, vec3( 1.0 ) );\r\n  i0.x = isX.x + isX.y + isX.z;\r\n  i0.yzw = 1.0 - isX;\r\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\r\n  i0.y += isYZ.x + isYZ.y;\r\n  i0.zw += 1.0 - isYZ.xy;\r\n  i0.z += isYZ.z;\r\n  i0.w += 1.0 - isYZ.z;\r\n\r\n  // i0 now contains the unique values 0,1,2,3 in each channel\r\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\r\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\r\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\r\n\r\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\r\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\r\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\r\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\r\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\r\n  vec4 x1 = x0 - i1 + C.xxxx;\r\n  vec4 x2 = x0 - i2 + C.yyyy;\r\n  vec4 x3 = x0 - i3 + C.zzzz;\r\n  vec4 x4 = x0 + C.wwww;\r\n\r\n// Permutations\r\n  i = mod289(i); \r\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\r\n  vec4 j1 = permute( permute( permute( permute (\r\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\r\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\r\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\r\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\r\n\r\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\r\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\r\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\r\n\r\n  vec4 p0 = grad4(j0,   ip);\r\n  vec4 p1 = grad4(j1.x, ip);\r\n  vec4 p2 = grad4(j1.y, ip);\r\n  vec4 p3 = grad4(j1.z, ip);\r\n  vec4 p4 = grad4(j1.w, ip);\r\n\r\n// Normalise gradients\r\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n  p0 *= norm.x;\r\n  p1 *= norm.y;\r\n  p2 *= norm.z;\r\n  p3 *= norm.w;\r\n  p4 *= taylorInvSqrt(dot(p4,p4));\r\n\r\n// Mix contributions from the five corners\r\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\r\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\r\n  m0 = m0 * m0;\r\n  m1 = m1 * m1;\r\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\r\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\r\n\r\n  }\r\n\r\nvoid main() {\r\n    if(gl_FragCoord.x >= 1.0) return;    \r\n    \r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n    vec3 pos = texture2D( texturePosition, uv ).xyz;\r\n    vec3 vel = texture2D( textureVelocity, uv ).xyz;\r\n    float idParticle = uv.y * resolution.x + uv.x;\r\n    float scale = 0.08;\r\n    \r\n    vel.xyz += 40.0 * vec3(\r\n      snoise( vec4( scale * pos.xyz, 7.225 * seed * 200.0 + 0.4 * time ) ),\r\n      snoise( vec4( scale * pos.xyz, 3.553 * seed + 0.4 * time ) ),\r\n      snoise( vec4( scale * pos.xyz, 1.259 * seed * 10.0 + 0.4 * time ) )\r\n    ) * 0.05;\r\n\r\n    vec3 gpos = pos - vec3(0.0,0.0,0.0);\r\n    vel += -(gpos)* length(gpos) * 0.005;\r\n\r\n    vel.xyz *= 0.9 + abs(sin(uv.y * 9.0)) * 0.05;\r\n\r\n    gl_FragColor = vec4( vel.xyz, 1.0 );\r\n}"},function(e,t){e.exports="varying vec3 vViewPosition;\r\nattribute float uvx;\r\nattribute float uvy;\r\nuniform sampler2D texturePosition;\r\nuniform float camY;\r\n\r\nfloat PI = 3.14159265;\r\n\r\nfloat atan2(float y, float x)\r\n{\r\n    return x == 0.0 ? sign(y) * PI / 2.0 : atan(y, x);\r\n}\r\n\r\nmat2 rotate(float rad){\r\n    return mat2(cos(rad),sin(rad),-sin(rad),cos(rad));\r\n}\r\n\r\nvoid main() {\r\n    vec2 nUV = vec2(uvx,uvy) + vec2(1.0,0.0);\r\n    \r\n    if(nUV.x >= 1.0){\r\n        nUV = vec2(uvx,uvy) - vec2(1.0,0.0);\r\n    }\r\n\r\n    vec3 p = position * 0.3;\r\n    vec3 pos = texture2D( texturePosition, vec2(uvx,uvy)).xyz;\r\n    vec3 nPos = texture2D( texturePosition, nUV).xyz;\r\n\r\n    vec3 vec = normalize(nPos - pos);\r\n    float rotX = atan2(vec.y,vec.z);\r\n\r\n    p.xy *= sin(uvx * PI) * (sin(uvy * PI) * 1.0 + 0.1);\r\n    p.yz *= rotate(rotX);\r\n\r\n    vec4 mvPosition = modelViewMatrix * vec4(p + pos, 1.0 );\r\n    gl_Position = projectionMatrix * mvPosition;\r\n\r\n    vViewPosition = -mvPosition.xyz;\r\n}\r\n\r\n\r\n"},function(e,t){e.exports="varying vec2 vUv;\r\n\r\nvoid main() {\r\n    vec3 pos = position;\r\n    pos.z = 1.0;\r\n    gl_Position = vec4(pos,1.0);\r\n    vUv = uv;\r\n}\r\n\r\n\r\n"},function(e,t){e.exports="varying vec2 vUv;\r\nuniform vec2 domPos;\r\nuniform vec2 domSize;\r\nuniform vec2 windowSize;\r\nuniform float time;\r\n\r\nvoid main()\r\n{\r\n  float aspect = windowSize.x / windowSize.y;\r\n  float width = domSize.x / windowSize.x;\r\n\r\n  //左上(0,0)に\r\n  vec3 pos = position + vec3(1.0,-1.0,0.0);\r\n\r\n  //size\r\n  pos.x *= width;\r\n  pos.y *= (width * aspect) * (domSize.y / domSize.x);\r\n\r\n  //left top\r\n  pos += vec3(-1.0,1.0,0.0);\r\n\r\n  //dom position (windowは(-1.0,-1.0)-(1.0,1.0)なので *2 が必要)\r\n  pos += vec3(domPos.x / windowSize.x * 2.0,-domPos.y / windowSize.y * 2.0,0.0);\r\n\r\n  gl_Position = vec4(pos, 1.0);\r\n  vUv = uv;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D backbuffer;\r\nuniform vec2 resolution;\r\nvarying vec2 vUv;\r\n\r\nuniform float threshold;\r\n\r\nvoid main(){\r\n\tvec3 c = texture2D(backbuffer,vUv).xyz;\r\n\tfloat f = max(0.0,length(c) * 1.2 - length(vec3(threshold)));\r\n\tgl_FragColor = vec4(vec3(c) * f,1.0);\r\n}"},function(e,t){e.exports="varying vec2 vUv;\r\nuniform sampler2D backbuffer;\r\nuniform vec2 resolution;\r\n\r\nuniform sampler2D sceneTex;\r\nuniform float brightness;\r\n\r\nvoid main(){\r\n\tgl_FragColor = texture2D(sceneTex, vUv) * 1.0 + texture2D(backbuffer, vUv) * brightness;\r\n}"},function(e,t){e.exports="void main() {\r\n    gl_Position = vec4( position, 1.0 );\r\n}"},function(e,t){e.exports="uniform float alpha;\r\nuniform float beta;\r\nuniform vec2 resolution;\r\nuniform sampler2D dataTex;\r\n\r\nfloat sampleData( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\t\r\n\tif( uv.x <= 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\r\n\t}else if( uv.x >= 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y <= 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\r\n\t}else if( uv.y >= 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn texture2D( tex, uv + offset / resolution ).z;\r\n\r\n}\r\n\r\nvoid main(){\r\n  vec4 data = texture2D(dataTex, gl_FragCoord.xy / resolution);\r\n\r\n  float l = sampleData(dataTex, (gl_FragCoord.xy - vec2(1.0, 0.0)) / resolution, resolution);\r\n  float r = sampleData(dataTex, (gl_FragCoord.xy + vec2(1.0, 0.0)) / resolution, resolution);\r\n  float t = sampleData(dataTex, (gl_FragCoord.xy - vec2(0.0, 1.0)) / resolution, resolution);\r\n  float b = sampleData(dataTex, (gl_FragCoord.xy + vec2(0.0, 1.0)) / resolution, resolution);\r\n\r\n  float divergence = data.w;\r\n  float pressure = (divergence * alpha + (l + r + t + b)) * 0.25 * beta;\r\n\r\n  gl_FragColor = vec4(data.xy, pressure, divergence);\r\n}"},function(e,t){e.exports="\r\nuniform float time;\r\nuniform float viscosity;\r\nuniform float forceRadius;\r\nuniform float forceCoefficient;\r\nuniform float autoforceCoefficient;\r\nuniform vec2 resolution;\r\nuniform sampler2D dataTex;\r\n\r\nuniform vec2 pointerPos;\r\nuniform vec2 pointerVec;\r\n\r\nfloat sampleData( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\t\r\n\tif( uv.x <= 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\r\n\t}else if( uv.x >= 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y <= 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\r\n\t}else if( uv.y >= 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn texture2D( tex, uv + offset / resolution ).z;\r\n\r\n}\r\n\r\n//\r\n// Description : Array and textureless GLSL 2D simplex noise function.\r\n//      Author : Ian McEwan, Ashima Arts.\r\n//  Maintainer : stegu\r\n//     Lastmod : 20110822 (ijm)\r\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\r\n//               Distributed under the MIT License. See LICENSE file.\r\n//               https://github.com/ashima/webgl-noise\r\n//               https://github.com/stegu/webgl-noise\r\n// \r\n\r\nvec3 mod289(vec3 x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec2 mod289(vec2 x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec3 permute(vec3 x) {\r\n  return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nfloat snoise(vec2 v)\r\n  {\r\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\r\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\r\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\r\n                      0.024390243902439); // 1.0 / 41.0\r\n// First corner\r\n  vec2 i  = floor(v + dot(v, C.yy) );\r\n  vec2 x0 = v -   i + dot(i, C.xx);\r\n\r\n// Other corners\r\n  vec2 i1;\r\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\r\n  //i1.y = 1.0 - i1.x;\r\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\r\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\r\n  // x1 = x0 - i1 + 1.0 * C.xx ;\r\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\r\n  vec4 x12 = x0.xyxy + C.xxzz;\r\n  x12.xy -= i1;\r\n\r\n// Permutations\r\n  i = mod289(i); // Avoid truncation effects in permutation\r\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\r\n\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));\r\n\r\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\r\n  m = m*m ;\r\n  m = m*m ;\r\n\r\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\r\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\r\n\r\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\r\n  vec3 h = abs(x) - 0.5;\r\n  vec3 ox = floor(x + 0.5);\r\n  vec3 a0 = x - ox;\r\n\r\n// Normalise gradients implicitly by scaling m\r\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\r\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\r\n\r\n// Compute final noise value at P\r\n  vec3 g;\r\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\r\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\r\n  return 130.0 * dot(m, g);\r\n}\r\n\r\nvoid main(){\r\n  vec2 uv = gl_FragCoord.xy / resolution;\r\n  vec4 data = texture2D(dataTex, uv);\r\n  vec2 v = data.xy;\r\n\r\n  vec2 offsetX = vec2(1.0, 0.0);\r\n  vec2 offsetY = vec2(0.0, 1.0);\r\n\r\n  float l = sampleData(dataTex, (gl_FragCoord.xy - offsetX) / resolution, resolution);\r\n  float r = sampleData(dataTex, (gl_FragCoord.xy + offsetX) / resolution, resolution);\r\n  float t = sampleData(dataTex, (gl_FragCoord.xy - offsetY) / resolution, resolution);\r\n  float b = sampleData(dataTex, (gl_FragCoord.xy + offsetY) / resolution, resolution);\r\n\r\n  v += vec2(r - l, b - t) * 0.5;\r\n  float n =  snoise(vec2(uv * 10.0 + time)) * 3.1415;\r\n\r\n  float pointerW = 1.0 - smoothstep( 0.0, .1, length(uv - pointerPos) );\r\n  v += pointerW * pointerVec * 0.1;\r\n\r\n  v *= viscosity;\r\n  \r\n  gl_FragColor = vec4(v, data.zw);\r\n}"},function(e,t){e.exports="uniform vec2 resolution;\r\nuniform sampler2D dataTex;\r\n\r\nvec2 sampleData( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\t\r\n\tif( uv.x <= 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\r\n\t}else if( uv.x >= 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y <= 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\r\n\t}else if( uv.y >= 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn texture2D( tex, uv + offset / resolution ).xy;\r\n\r\n}\r\n\r\nvoid main(){\r\n\r\n  vec4 data = texture2D(dataTex, gl_FragCoord.xy / resolution);\r\n\r\n  vec2 offsetX = vec2(1.0, 0.0);\r\n  vec2 offsetY = vec2(0.0, 1.0);\r\n\r\n  vec2 l = sampleData(dataTex, (gl_FragCoord.xy - offsetX) / resolution, resolution);\r\n  vec2 r = sampleData(dataTex, (gl_FragCoord.xy + offsetX) / resolution, resolution);\r\n  vec2 t = sampleData(dataTex, (gl_FragCoord.xy - offsetY) / resolution, resolution);\r\n  vec2 b = sampleData(dataTex, (gl_FragCoord.xy + offsetY) / resolution, resolution);\r\n\r\n  float divergence = ((r.x - l.x) + (b.y - t.y)) * 0.5;\r\n\r\n  gl_FragColor = vec4(data.xy, data.z, divergence);\r\n}"},function(e,t){e.exports="uniform float attenuation;\r\nuniform vec2 resolution;\r\nuniform sampler2D dataTex;\r\n\r\nvec2 sampleVelocity( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\t\r\n\tif( uv.x <= 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\r\n\t}else if( uv.x >= 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y <= 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\r\n\t}else if( uv.y >= 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn texture2D( tex, uv + offset / resolution ).xy;\r\n\r\n}\r\n\r\nfloat samplePressure( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\t\r\n\tif( uv.x <= 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\r\n\t}else if( uv.x >= 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y <= 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\r\n\t}else if( uv.y >= 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn texture2D( tex, uv + offset / resolution ).z;\r\n\r\n}\r\n\r\n\r\nvec2 bilerp(sampler2D tex, vec2 p, vec2 resolution) {\r\n    vec4 ij; // i0, j0, i1, j1\r\n    ij.xy = floor(p - 0.5) + 0.5;\r\n    ij.zw = ij.xy + 1.0;\r\n\r\n    vec4 uv = ij / resolution.xyxy;\r\n    vec2 d11 = sampleVelocity(tex, uv.xy, resolution);\r\n    vec2 d21 = sampleVelocity(tex, uv.zy, resolution);\r\n    vec2 d12 = sampleVelocity(tex, uv.xw, resolution);\r\n    vec2 d22 = sampleVelocity(tex, uv.zw, resolution);\r\n\r\n    vec2 a = p - ij.xy;\r\n\r\n    return mix(mix(d11, d21, a.x), mix(d12, d22, a.x), a.y);\r\n}\r\n\r\nvoid main(){\r\n  vec2 r = resolution * 1.0;\r\n  vec2 p = gl_FragCoord.xy - sampleVelocity(dataTex, gl_FragCoord.xy / r, r);\r\n  gl_FragColor = vec4(bilerp(dataTex, p, r) * attenuation, samplePressure(dataTex, gl_FragCoord.xy / r, r), 0.0);\r\n}"},function(e){e.exports={name:"ore-three-ts",version:"0.2.1",description:"Three.js utils.",main:"build/ore-three.js",scripts:{dev:"webpack-dev-server --watch-content-base --config ./webpack/dev.config.js",build:"npm run build:module && npm run build:min && npm run build:types","build:module":"webpack --config ./webpack/build-module.config.js","build:min":"webpack --config ./webpack/build-min.config.js","build:types":"tsc --emitDeclarationOnly"},repository:{type:"git",url:"git@github.com:ukonpower/ore-three-ts.git"},keywords:["threejs","webgl"],types:"types/index.d.ts",files:["build","src","types"],author:"ukonpower",bugs:{url:"https://github.com/ukonpower/ore-three-ts/issues"},license:"MIT",devDependencies:{"shader-loader":"^1.3.1","ts-loader":"^6.0.0",typescript:"^3.4.5",webpack:"^4.30.0","webpack-cli":"^3.3.2","webpack-dev-server":"^3.3.1","webpack-merge":"^4.2.1"},dependencies:{three:"^0.105.0"}}},function(e,t,r){"use strict";r.r(t);var n,i=r(0),o=r(14).version,s=function(){function e(e){console.log("%c- Welcome to Ore-Three "+o+" -","padding: 5px 10px ;background-color: black; color: white;font-size:11px"),console.log("%c↓↓ THANKS TO THIS POWERFULL ENGINE!!","padding: 2px 2px ;background-color: black; color: white; font-size:5px"),this.renderer=new i.WebGLRenderer(e),this.renderer.debug.checkShaderErrors=!0,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(e.retina?window.devicePixelRatio:1),window.addEventListener("orientationchange",this.onOrientationDevice.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this)),this.animate()}return e.prototype.animate=function(){this.currentScene&&this.currentScene.tick(),requestAnimationFrame(this.animate.bind(this))},e.prototype.setScene=function(e){"object"==typeof e?this.currentScene=e:"function"==typeof e&&(this.currentScene=new e(this.renderer))},e.prototype.onWindowResize=function(){var e=window.innerWidth,t=window.innerHeight;this.renderer.setSize(e,t),this.currentScene&&this.currentScene.onResize(e,t)},e.prototype.onOrientationDevice=function(){this.onWindowResize()},e}(),a=function(){function e(){this.position=new i.Vector2(0,0),this.delta=new i.Vector2(0,0),this.hoverPosition=new i.Vector2(0,0),this.hoverDelta=new i.Vector2(0,0);var e=navigator.userAgent;e.indexOf("iPhone")>=0||e.indexOf("iPad")>=0||e.indexOf("Android")>=0?(window.addEventListener("touchstart",this._TouchStart.bind(this)),window.addEventListener("touchmove",this._TouchMove.bind(this),{passive:!1}),window.addEventListener("touchend",this._TouchEnd.bind(this))):(window.addEventListener("mousedown",this._TouchStart.bind(this)),window.addEventListener("mousemove",this._TouchMove.bind(this)),window.addEventListener("mouseup",this._TouchEnd.bind(this)),window.addEventListener("dragend",this._TouchEnd.bind(this)),window.addEventListener("wheel",this.wheel.bind(this),{passive:!1})),this.position.set(-1,-1),this._touchDown=!1}return e.prototype.setPos=function(e,t){this._touchDown&&(-1==this.position.x||-1==this.position.y?this.delta.set(0,0):this.delta.set(e-this.position.x,t-this.position.y),this.position.set(e,t)),this.hoverDelta.set(e-this.hoverPosition.x,t-this.hoverPosition.y),this.hoverPosition.set(e,t)},e.prototype._TouchStart=function(e){e.touches?this.position.set(e.touches[0].clientX+window.pageXOffset,e.touches[0].clientY+window.pageYOffset):0==e.button&&this.setPos(e.pageX,e.pageY),this._touchDown=!0,this.onTouchStart&&this.onTouchStart(e)},e.prototype._TouchMove=function(e){e.touches?this.setPos(e.touches[0].clientX+window.pageXOffset,e.touches[0].clientY+window.pageYOffset):this.setPos(e.pageX,e.pageY),this.onTouchMove&&this.onTouchMove(e)},e.prototype._TouchEnd=function(){this._touchDown&&(this._touchDown=!1,this.position.set(-1,-1),this.onTouchEnd&&this.onTouchEnd(event),this.delta.set(0,0))},e.prototype.wheel=function(e){this.onWheel&&this.onWheel(e)},e.prototype.update=function(){this.delta.multiplyScalar(.9),this.hoverDelta.multiplyScalar(.9)},e}(),u=function(){function e(e){this._pageOffset=0,this.scrollVel=0,this.x=1,this.isAutoMoving=!1,this.element=e,this.rect=this.element.getBoundingClientRect()}return Object.defineProperty(e.prototype,"pageOffset",{get:function(){return this._pageOffset},enumerable:!0,configurable:!0}),e.prototype.resize=function(){this.rect=this.element.getBoundingClientRect()},e.prototype.moveto=function(e,t,r){if(void 0===t&&(t=1),void 0===r&&(r=null),e){if(!this.isAutoMoving){var n=e.getBoundingClientRect().top;this.baseOffset=this.pageOffset,this.x=0,this.scrollVel=0,this.isAutoMoving=!0,this.duration=t,this.scrollDistance=Math.min(n,this.rect.height-(this.pageOffset+window.innerHeight)),this.onAutoMoved=r}}else console.log("target is null.")},e.prototype.setScrollVelocity=function(e){this.isAutoMoving=!1,this.scrollVel=e},e.prototype.update=function(e){if(void 0===e&&(e=null),this.isAutoMoving){this.x+=(e||.016)/this.duration;var t=!1;this.x>=1&&(t=!0,this.x=1);var r=this.sigmoid(6,this.x);this._pageOffset=this.baseOffset+this.scrollDistance*r,t&&(this.onAutoMoved&&this.onAutoMoved(),this.isAutoMoving=!1,this.onAutoMoved=null)}else this._pageOffset+=this.scrollVel,this._pageOffset=Math.min(Math.max(0,this.pageOffset),this.rect.height-window.innerHeight),this.scrollVel*=.95;this.element.style.transform="translate3d( 0,"+-this._pageOffset+"px,0 )"},e.prototype.sigmoid=function(e,t){var r=Math.exp(-e*(2*t-1)),n=Math.exp(-e);return(1+(1-r)/(1+r)*(1+n)/(1-n))/2},e}(),l=function(){function e(e){this.time=0,this.deltaTime=0,this.renderer=e,this.name=name,this.scene=new i.Scene,this.clock=new i.Clock,this.camera=new i.PerspectiveCamera(50,innerWidth/innerHeight,.1,1e3),this.cursor=new a,this.cursor.onTouchStart=this.onTouchStart.bind(this),this.cursor.onTouchMove=this.onTouchMove.bind(this),this.cursor.onTouchEnd=this.onTouchEnd.bind(this),this.cursor.onWheel=this.onWheel.bind(this),this.onResize(window.innerWidth,window.innerHeight)}return e.prototype.tick=function(){this.deltaTime=this.clock.getDelta(),this.time+=this.deltaTime,this.animate()},e.prototype.animate=function(){},e.prototype.onResize=function(e,t){this.width=e,this.heigth=t,this.camera.aspect=e/t,this.camera.updateProjectionMatrix()},e.prototype.onTouchStart=function(e){},e.prototype.onTouchMove=function(e){},e.prototype.onTouchEnd=function(e){},e.prototype.onWheel=function(e){},e}(),c=function(){function e(e){this.x=0,this.duration=1,this.isMoving=!1,this.force=!1,this.objPos=e.position,this.objRot=e.rotation,this.setBaseTransform()}return e.prototype.setBaseTransform=function(){this.basePos=this.objPos.clone(),this.baseRot=this.objRot.toVector3()},e.prototype.move=function(e,t,r,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=1),!(this.isMoving&&!this.force)&&(e||(e=this.objPos.clone()),t||(t=this.objRot.clone()),n&&(this.onFinish=n),this.duration=r,this.setBaseTransform(),this.goalPos=e.clone(),this.goalRot=t.toVector3(),this.distancePos=(new i.Vector3).subVectors(this.goalPos,this.basePos),this.distanceRot=(new i.Vector3).subVectors(this.goalRot,this.baseRot),this.x=0,this.isMoving=!0,!0)},e.prototype.update=function(e){var t=!1;if(this.isMoving){this.x+=(e||.016)/this.duration,this.x>1&&(this.x=1,t=!0);var r=this.sigmoid(6,this.x);this.objPos.set(this.basePos.x+this.distancePos.x*r,this.basePos.y+this.distancePos.y*r,this.basePos.z+this.distancePos.z*r),this.objRot.set(this.baseRot.x+this.distanceRot.x*r,this.baseRot.y+this.distanceRot.y*r,this.baseRot.z+this.distanceRot.z*r),t&&(this.x=0,this.isMoving=!1,this.onFinish&&this.onFinish())}},e.prototype.sigmoid=function(e,t){var r=Math.exp(-e*(2*t-1)),n=Math.exp(-e);return(1+(1-r)/(1+r)*(1+n)/(1-n))/2},e}(),h=function(){function e(e){this.target=e,this.scrollVel=new i.Vector2}return e.prototype.update=function(){this.scrollVel.multiplyScalar(.96);var e=new i.Vector3(this.scrollVel.y,this.scrollVel.x,0).normalize(),t=(new i.Quaternion).setFromAxisAngle(e,this.scrollVel.length());t.multiply(this.target.quaternion),this.target.quaternion.copy(t)},e.prototype.addVelocity=function(e){this.scrollVel.addVectors(this.scrollVel,e.multiplyScalar(.001))},e}(),f=function(){function e(e,t){this.target=e,this.rotate=new i.Quaternion,this.rotMat=new i.Matrix4,this.scrollVel=new i.Vector2(0,0),this.uniform=t,this.uniform.rotVec={value:this.scrollVel},this.uniform.rotation={value:null}}return e.prototype.update=function(){this.scrollVel.multiplyScalar(.96);var e=new i.Vector3(this.scrollVel.y,this.scrollVel.x,0).normalize(),t=(new i.Quaternion).setFromAxisAngle(e,this.scrollVel.length());t.multiply(this.rotate),this.rotate.copy(t),this.uniform.rotation.value=this.rotMat.compose(new i.Vector3,this.rotate,this.target.scale)},e.prototype.addVelocity=function(e){this.scrollVel.addVectors(this.scrollVel,e.multiplyScalar(.001))},e}(),d=function(){function e(e){this.isLoaded=!1,this.listener=e.listener?e.listener:new i.AudioListener,this.audio=new i.Audio(this.listener),this.bufferSize=e.bufferSize?e.bufferSize:128,this.uniforms=[],e.src&&this.load(e.src)}return Object.defineProperty(e.prototype,"isPlaying",{get:function(){return!!this.audio&&this.audio.isPlaying},enumerable:!0,configurable:!0}),e.prototype.load=function(e){var t=this;this.audio.buffer&&this.audio.stop();var r=new i.AudioLoader;this.isLoaded=!1,this.onLoad=null,r.load(e,function(e){t.audio.setBuffer(e),t.audio.setLoop(!0),t.audio.setVolume(.5),t.analyser=new i.AudioAnalyser(t.audio,t.bufferSize),t.soundData=new i.DataTexture(t.analyser.data,t.bufferSize/2,1,i.LuminanceFormat),t.soundData.needsUpdate=!0,t.isLoaded=!0,t.setUniformData(t.uniforms),t.onLoad&&t.onLoad()},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.log("An error happened: "+e)})},e.prototype.play=function(){var e=this;this.isLoaded?this.audio.play():this.onLoad=function(){e.audio.play()}},e.prototype.pause=function(){this.audio.isPlaying&&this.audio.pause()},e.prototype.registerUniforms=function(e){this.uniforms.push(e),this.setUniformData([e])},e.prototype.setUniformData=function(e){var t=this;e.forEach(function(e){e.audioSpectrum={value:t.soundData},e.audioVolume={value:t.volume}})},e.prototype.update=function(){var e=this;this.analyser&&(this.analyser.getFrequencyData(),this.volume=this.analyser.getAverageFrequency(),this.uniforms.forEach(function(t){t.audioSpectrum.value.needsUpdate=!0,t.audioVolume.value=e.volume}))},e}(),p=function(){function e(e,t,r){this.variables=[],this.currentTextureIndex=0,this.sizeX=e,this.sizeY=t,this.renderer=r,this.scene=new i.Scene,this.camera=new i.Camera,this.camera.position.z=1,this.passThruUniforms={texture:{value:null}},this.passThruShader=this.createShaderMaterial(this.getPassThroughFragmentShader(),this.passThruUniforms),this.mesh=new i.Mesh(new i.PlaneBufferGeometry(2,2),this.passThruShader),this.scene.add(this.mesh)}return e.prototype.addVariable=function(e,t,r){var n={name:e,initialValueTexture:r,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:i.NearestFilter,magFilter:i.NearestFilter};return this.variables.push(n),n},e.prototype.setVariableDependencies=function(e,t){e.dependencies=t},e.prototype.init=function(){if(!this.renderer.extensions.get("OES_texture_float"))return!1;if(0===this.renderer.capabilities.maxVertexTextures)return!1;for(var e=0;e<this.variables.length;e++){var t=this.variables[e];t.renderTargets[0]=this.createRenderTarget(this.sizeX,this.sizeY,t.wrapS,t.wrapT,t.minFilter,t.magFilter),t.renderTargets[1]=this.createRenderTarget(this.sizeX,this.sizeY,t.wrapS,t.wrapT,t.minFilter,t.magFilter),this.renderTexture(t.initialValueTexture,t.renderTargets[0]),this.renderTexture(t.initialValueTexture,t.renderTargets[1]);var r=t.material,n=r.uniforms;if(null!==t.dependencies)for(var i=0;i<t.dependencies.length;i++){var o=t.dependencies[i];if(o.name!==t.name){for(var s=!1,a=0;a<this.variables.length;a++)if(o.name===this.variables[a].name){s=!0;break}if(!s)return console.error("Variable dependency not found. Variable="+t.name+", dependency="+o.name),!1}n[o.name]={value:null},r.fragmentShader="\nuniform sampler2D "+o.name+";\n"+r.fragmentShader}}return this.currentTextureIndex=0,null},e.prototype.compute=function(){for(var e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0,r=0,n=this.variables.length;r<n;r++){var i=this.variables[r];if(null!==i.dependencies)for(var o=i.material.uniforms,s=0,a=i.dependencies.length;s<a;s++){var u=i.dependencies[s];o[u.name].value=u.renderTargets[e].texture}this.doRenderTarget(i.material,i.renderTargets[t])}this.currentTextureIndex=t},e.prototype.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},e.prototype.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},e.prototype.addResolutionDefine=function(e){e.defines.resolution="vec2( "+this.sizeX.toFixed(1)+", "+this.sizeY.toFixed(1)+" )"},e.prototype.createShaderMaterial=function(e,t){t=t||{};var r=new i.ShaderMaterial({uniforms:t,vertexShader:this.getPassThroughVertexShader(),fragmentShader:e});return this.addResolutionDefine(r),r},e.prototype.createRenderTarget=function(e,t,r,n,o,s){return e=e||this.sizeX,t=t||this.sizeY,r=r||i.ClampToEdgeWrapping,n=n||i.ClampToEdgeWrapping,o=o||i.NearestFilter,s=s||i.NearestFilter,new i.WebGLRenderTarget(e,t,{wrapS:r,wrapT:n,minFilter:o,magFilter:s,format:i.RGBAFormat,type:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?i.HalfFloatType:i.FloatType,stencilBuffer:!1,depthBuffer:!1})},e.prototype.createTexture=function(){var e=new Float32Array(this.sizeX*this.sizeY*4),t=new i.DataTexture(e,this.sizeX,this.sizeY,i.RGBAFormat,i.FloatType);return t.needsUpdate=!0,t},e.prototype.renderTexture=function(e,t){this.passThruUniforms.texture.value=e,this.doRenderTarget(this.passThruShader,t),this.passThruUniforms.texture.value=null},e.prototype.doRenderTarget=function(e,t){var r=this.renderer.getRenderTarget();this.mesh.material=e,this.renderer.setRenderTarget(t),this.renderer.render(this.scene,this.camera),this.mesh.material=this.passThruShader,this.renderer.setRenderTarget(r)},e.prototype.getPassThroughVertexShader=function(){return"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n"},e.prototype.getPassThroughFragmentShader=function(){return"uniform sampler2D texture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( texture, uv );\n\n}\n"},e}(),v=r(2),m=r.n(v),x=r(3),g=r.n(x),y=r(4),w=r.n(y),b=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),T=function(e){function t(t,r,n,i){void 0===i&&(i=null);var o=e.call(this)||this;return o.renderer=t,o.computeRenderer,o.num=r,o.length=n,o.fragment=null!=i?i:g.a,o.comTexs={position:{texture:null,uniforms:null},velocity:{texture:null,uniforms:null}},o.renderer.extensions.get("OES_texture_float")?(o.initComputeRenderer(),o.createTrails()):console.log("No OES_texture_float support for float textures."),o}return b(t,e),t.prototype.initComputeRenderer=function(){if(this.computeRenderer=new p(this.length,this.num,this.renderer),null==this.computeRenderer)return!1;var e=this.computeRenderer.createTexture(),t=this.computeRenderer.createTexture();return this.initPosition(e),this.comTexs.position.texture=this.computeRenderer.addVariable("texturePosition",m.a,e),this.comTexs.velocity.texture=this.computeRenderer.addVariable("textureVelocity",this.fragment,t),this.computeRenderer.setVariableDependencies(this.comTexs.position.texture,[this.comTexs.position.texture,this.comTexs.velocity.texture]),this.comTexs.position.uniforms=this.comTexs.position.texture.material.uniforms,this.computeRenderer.setVariableDependencies(this.comTexs.velocity.texture,[this.comTexs.position.texture,this.comTexs.velocity.texture]),this.comTexs.velocity.uniforms=this.comTexs.velocity.texture.material.uniforms,this.comTexs.velocity.uniforms.time={value:0},this.comTexs.velocity.uniforms.seed={value:100*Math.random()},this.comTexs.velocity.uniforms.avoidPos={value:new i.Vector3(0,0,0)},this.computeRenderer.init(),!0},t.prototype.initPosition=function(e){for(var t=e.image.data,r=new i.Vector3(25,25,25),n=0;n<t.length;n+=4*this.length)for(var o=Math.random()*r.x-r.x/2,s=Math.random()*r.y-r.y/2,a=Math.random()*r.z-r.z/2,u=0;u<4*this.length;u+=4)t[n+u+0]=o-30,t[n+u+1]=s+20,t[n+u+2]=a,t[n+u+3]=0},t.prototype.createTrails=function(){for(var e=new i.InstancedBufferGeometry,t=[],r=[],n=[],o=[],s=[],a=0;a<this.length;a++)for(var u=a,l=0;l<10;l++){var c=2*Math.PI/10*l,h=.1*Math.cos(c),f=.1*Math.sin(c);0,t.push(h),t.push(f),t.push(0);var d=new i.Vector3(h,f,0);d.normalize(),n.push(d.x,d.y,d.z),o.push(a/this.length);var p=10*u+l;a>0&&(r.push(p),r.push(10*(u-1)+(l+1)%10),r.push(10*u+(l+1)%10),r.push(p),r.push(p-10),r.push(10*(u-1)+(l+1)%10))}var v=new Float32Array(t),m=new Float32Array(n),x=new Uint32Array(r),g=new Float32Array(o);e.addAttribute("position",new i.BufferAttribute(v,3)),e.addAttribute("uvx",new i.BufferAttribute(g,1)),e.addAttribute("normal",new i.BufferAttribute(m,3)),e.setIndex(new i.BufferAttribute(x,1));for(var y=0;y<this.num;y++)s.push(y/this.num);var b=new Float32Array(s);e.addAttribute("uvy",new i.InstancedBufferAttribute(b,1,!1,1));var T=i.ShaderLib.standard;this.uni=i.UniformsUtils.merge([T.uniforms,{texturePosition:{value:null},textureVelocity:{value:null}}]);var S=new i.ShaderMaterial({uniforms:this.uni,vertexShader:w.a,fragmentShader:T.fragmentShader,lights:!0,flatShading:!0}),P=new i.Mesh(e,S);P.matrixAutoUpdate=!1,P.updateMatrix(),this.add(P)},t.prototype.update=function(e){this.computeRenderer.compute(),this.comTexs.velocity.uniforms.time.value=e,this.uni.texturePosition.value=this.computeRenderer.getCurrentRenderTarget(this.comTexs.position.texture).texture,this.uni.textureVelocity.value=this.computeRenderer.getCurrentRenderTarget(this.comTexs.velocity.texture).texture},t.prototype.setAvoidObje=function(e,t){this.comTexs.velocity.uniforms.avoidPos.value=e,this.comTexs.velocity.uniforms.avoidScale.value=t},t.prototype.setCamY=function(e){this.comTexs.velocity.uniforms.camY.value=e},t}(i.Object3D),S=r(5),P=r.n(S),z=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),R=function(e){function t(t,r){var n=e.call(this)||this;return n.frag=t,n.uni=r,n.createMesh(),n}return z(t,e),t.prototype.createMesh=function(){var e=new i.BufferGeometry,t=[],r=[],n=[];t.push(-1,1,0),t.push(1,1,0),t.push(1,-1,0),t.push(-1,-1,0),n.push(0,1),n.push(1,1),n.push(1,0),n.push(0,0),r.push(0,2,1,0,3,2);var o=new Float32Array(t),s=new Uint32Array(r),a=new Float32Array(n);e.addAttribute("position",new i.BufferAttribute(o,3)),e.addAttribute("uv",new i.BufferAttribute(a,2)),e.setIndex(new i.BufferAttribute(s,1));var u=new i.ShaderMaterial({uniforms:this.uni,fragmentShader:this.frag,vertexShader:P.a,transparent:!0});this.add(new i.Mesh(e,u))},t}(i.Object3D),D=function(){function e(e,t,r){var n=this;this.renderer=e,this.resolution=new i.Vector2,this.renderer.getSize(this.resolution),this.resolution.multiplyScalar(this.renderer.getPixelRatio()*r?r:1),this.scene=new i.Scene,this.camera=new i.OrthographicCamera(-1,1,1,-1,0,1),this.screenMesh=new i.Mesh(new i.PlaneGeometry(2,2),null),this.scene.add(this.screenMesh),this.initRenderTargets(),t.forEach(function(e){e.uniforms||(e.uniforms={}),e.uniforms.backbuffer||(e.uniforms.backbuffer={value:null}),e.uniforms.resolution||(e.uniforms.resolution={value:n.resolution});var t={material:new i.ShaderMaterial({uniforms:e.uniforms,vertexShader:"varying vec2 vUv; void main() { vUv = uv; gl_Position = vec4( position, 1.0 ); } ",fragmentShader:e.fragmentShader}),uniforms:e.uniforms};n.effectMaterials?n.effectMaterials.push(t):n.effectMaterials=[t]})}return e.prototype.initRenderTargets=function(){this.readBuffer=this.createRenderTarget(),this.writeBuffer=this.createRenderTarget()},e.prototype.createRenderTarget=function(){return new i.WebGLRenderTarget(this.resolution.x,this.resolution.y)},e.prototype.swapBuffers=function(){var e=this.writeBuffer;this.writeBuffer=this.readBuffer,this.readBuffer=e},e.prototype.render=function(e,t,r){var n=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===r&&(r=!1);var i=!1,o=!1;"Scene"==e.type?(this.renderer.setRenderTarget(this.readBuffer),this.renderer.render(e,t),i=r):"boolean"==typeof e?i=e:(this.effectMaterials[0].uniforms.backbuffer.value=e,o=!0,i=t),this.effectMaterials.forEach(function(e,t){n.screenMesh.material=e.material,(!o||t>0)&&(e.uniforms.backbuffer.value=n.readBuffer.texture),t<n.effectMaterials.length-1||i?n.renderer.setRenderTarget(n.writeBuffer):n.renderer.setRenderTarget(null),n.renderer.render(n.scene,n.camera),n.swapBuffers()}),this.resultBuffer=i?this.readBuffer:null},e.prototype.getResultTexture=function(){return this.resultBuffer?this.resultBuffer.texture:null},e.prototype.resize=function(e,t){this.readBuffer.setSize(e,t)},e}(),C=r(6),_=r.n(C),A=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(e){function t(t){var r=e.call(this)||this;r.dom=t.dom,r.uni=t.uniforms,r.frag=t.fragmentShader;var n=r.dom.getBoundingClientRect();return r.domPos=new i.Vector2(n.left,n.right),r.domSize=new i.Vector2(n.width,n.height),r.windowSize=new i.Vector2(window.innerWidth,window.innerHeight),r.uni.domPos={value:r.domPos},r.uni.domSize={value:r.domSize},r.uni.windowSize={value:r.windowSize},r.createMesh(),r}return A(t,e),t.prototype.createMesh=function(){var e=new i.PlaneGeometry(2,2,1,1),t=new i.ShaderMaterial({uniforms:this.uni,fragmentShader:this.frag,vertexShader:_.a,transparent:!0}),r=new i.Mesh(e,t);r.frustumCulled=!1,r.position.set(0,0,0),r.rotateY(Math.PI),this.add(r)},t.prototype.updateDom=function(){this.windowSize.set(window.innerWidth,window.innerHeight);var e=this.dom.getBoundingClientRect();this.domSize.set(e.width,e.height),this.domPos.set(e.left,e.top)},t}(i.Object3D),M=r(7),O=r.n(M),V=r(1),E=r.n(V),I=r(8),k=r.n(I),L=function(){function e(e){this.renderCount=5,this.threshold=.9,this.brightness=.9,this.renderer=e,this.init()}return e.prototype.init=function(){this.sceneTex={value:null},this.resolution={value:new i.Vector2},this.resize(),this._brightUni={threshold:{value:this.threshold}},this._blurUni1={direction:{value:!0},resolution:this.resolution},this._blurUni2={direction:{value:!1},resolution:this.resolution},this._bloomUni={sceneTex:this.sceneTex,brightness:{value:this.brightness}};var e=[{fragmentShader:O.a,uniforms:this._brightUni}],t=[{fragmentShader:E.a,uniforms:this._blurUni1},{fragmentShader:E.a,uniforms:this._blurUni2}],r=[{fragmentShader:k.a,uniforms:this._bloomUni}];this._brightPP=new D(this.renderer,e,.1),this._blurPP=new D(this.renderer,t,.1),this._bloomPP=new D(this.renderer,r),this.sceneRenderTarget=this._bloomPP.createRenderTarget()},e.prototype.render=function(e,t){this._brightUni.threshold.value=this.threshold,this._bloomUni.brightness.value=this.brightness,this.renderer.setRenderTarget(this.sceneRenderTarget),this.renderer.render(e,t),this.sceneTex.value=this.sceneRenderTarget.texture,this._brightPP.render(this.sceneRenderTarget.texture,!0);for(var r=this._brightPP.getResultTexture(),n=0;n<this.renderCount;n++)this._blurPP.render(r,!0),r=this._blurPP.getResultTexture();this._bloomPP.render(r,!1)},e.prototype.resize=function(e,t){this.resolution.value.x=(e||window.innerWidth)/20,this.resolution.value.y=(t||window.innerHeight)/20},e}(),j=r(9),U=r.n(j),B=function(){function e(e,t){this.renderer=e,this.resolution=t,this.tempData=this.createData(),this.scene=new i.Scene,this.camera=new i.Camera,this.camera.position.z=1,this.mesh=new i.Mesh(new i.PlaneBufferGeometry(2,2)),this.scene.add(this.mesh)}return Object.defineProperty(e.prototype,"isSupported",{get:function(){return this.renderer.extensions.get("OES_texture_float")},enumerable:!0,configurable:!0}),e.prototype.createData=function(){return{buffer:new i.WebGLRenderTarget(this.resolution.x,this.resolution.y,{wrapS:i.ClampToEdgeWrapping,wrapT:i.ClampToEdgeWrapping,minFilter:i.NearestFilter,magFilter:i.NearestFilter,format:i.RGBAFormat,type:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?i.HalfFloatType:i.FloatType,stencilBuffer:!1,depthBuffer:!1})}},e.prototype.createKernel=function(e){var t={resolution:{value:this.resolution}};return{material:new i.ShaderMaterial({vertexShader:U.a,fragmentShader:e,uniforms:t}),uniforms:t}},e.prototype.compute=function(e,t){this.mesh.material=e.material,this.renderer.setRenderTarget(this.tempData.buffer),this.renderer.render(this.scene,this.camera),this.swapBuffers(t,this.tempData),this.renderer.setRenderTarget(null)},e.prototype.swapBuffers=function(e,t){var r=e.buffer;e.buffer=t.buffer,t.buffer=r},e}(),N=r(10),W=r.n(N),Y=r(11),H=r.n(Y),G=r(12),X=r.n(G),q=r(13),K=r.n(q),Z=function(){function e(e,t){this.solverIteration=20,this.attenuation=1,this.alpha=1,this.beta=1,this.viscosity=.99,this.forceRadius=90,this.forceCoefficient=1,this.autoforceCoefficient=.06,this.time=0,this.renderer=e,this.resolution=t,this.gcConroller=new B(this.renderer,this.resolution),this.kernels={divergence:this.gcConroller.createKernel(X.a),velocity:this.gcConroller.createKernel(H.a),pressure:this.gcConroller.createKernel(W.a),advect:this.gcConroller.createKernel(K.a)},this.kernels.divergence.uniforms.dataTex={value:null},this.kernels.pressure.uniforms.dataTex={value:null},this.kernels.pressure.uniforms.alpha={value:this.alpha},this.kernels.pressure.uniforms.beta={value:this.beta},this.kernels.velocity.uniforms.dataTex={value:null},this.kernels.velocity.uniforms.viscosity={value:this.viscosity},this.kernels.velocity.uniforms.time={value:this.time},this.kernels.velocity.uniforms.forceRadius={value:this.forceRadius},this.kernels.velocity.uniforms.forceCoefficient={value:this.forceCoefficient},this.kernels.velocity.uniforms.autoforceCoefficient={value:this.autoforceCoefficient},this.kernels.velocity.uniforms.pointerPos={value:0},this.kernels.velocity.uniforms.pointerVec={value:0},this.kernels.advect.uniforms.dataTex={value:null},this.kernels.advect.uniforms.attenuation={value:this.attenuation},this.fluidData=this.gcConroller.createData()}return e.prototype.update=function(e){this.time+=e,this.kernels.divergence.uniforms.dataTex.value=this.fluidData.buffer.texture,this.gcConroller.compute(this.kernels.divergence,this.fluidData),this.kernels.pressure.uniforms.dataTex.value=this.fluidData.buffer.texture,this.gcConroller.compute(this.kernels.pressure,this.fluidData),this.kernels.velocity.uniforms.dataTex.value=this.fluidData.buffer.texture,this.kernels.velocity.uniforms.time.value=this.time,this.gcConroller.compute(this.kernels.velocity,this.fluidData),this.kernels.advect.uniforms.dataTex.value=this.fluidData.buffer.texture,this.gcConroller.compute(this.kernels.advect,this.fluidData)},e.prototype.setPointer=function(e,t){this.kernels.velocity.uniforms.pointerPos.value=e,this.kernels.velocity.uniforms.pointerVec.value=t},e.prototype.getTexture=function(){return this.fluidData.buffer.texture},e}();r.d(t,"Controller",function(){return s}),r.d(t,"Cursor",function(){return a}),r.d(t,"PageScroller",function(){return u}),r.d(t,"BaseScene",function(){return l}),r.d(t,"TransformAnimator",function(){return c}),r.d(t,"MouseRotator",function(){return h}),r.d(t,"MouseVertexRotator",function(){return f}),r.d(t,"AudioPlayer",function(){return d}),r.d(t,"GPUComputationRenderer",function(){return p}),r.d(t,"Fish",function(){return T}),r.d(t,"Background",function(){return R}),r.d(t,"PostProcessing",function(){return D}),r.d(t,"DomGLSL",function(){return F}),r.d(t,"BloomFilter",function(){return L}),r.d(t,"StableFluids",function(){return Z}),r.d(t,"GPUComputationController",function(){return B})}]);