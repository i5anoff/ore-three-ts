window.ORE=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=18)}([function(e,t){e.exports=window.THREE},function(e,t){e.exports="uniform sampler2D texturePosition;\r\nuniform sampler2D textureVelocity;\r\nuniform vec2 resolution;\r\nuniform float time;\r\nuniform float seed;\r\n\r\n//\r\n// Description : Array and textureless GLSL 2D/3D/4D simplex \r\n//               noise functions.\r\n//      Author : Ian McEwan, Ashima Arts.\r\n//  Maintainer : stegu\r\n//     Lastmod : 20110822 (ijm)\r\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\r\n//               Distributed under the MIT License. See LICENSE file.\r\n//               https://github.com/ashima/webgl-noise\r\n//               https://github.com/stegu/webgl-noise\r\n// \r\n\r\nvec4 mod289(vec4 x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\r\n\r\nfloat mod289(float x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\r\n\r\nvec4 permute(vec4 x) {\r\n     return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nfloat permute(float x) {\r\n     return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec4 taylorInvSqrt(vec4 r)\r\n{\r\n  return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nfloat taylorInvSqrt(float r)\r\n{\r\n  return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nvec4 grad4(float j, vec4 ip)\r\n  {\r\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\r\n  vec4 p,s;\r\n\r\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\r\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\r\n  s = vec4(lessThan(p, vec4(0.0)));\r\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \r\n\r\n  return p;\r\n  }\r\n\t\t\t\t\t\t\r\n// (sqrt(5) - 1)/4 = F4, used once below\r\n#define F4 0.309016994374947451\r\n\r\nfloat snoise(vec4 v)\r\n  {\r\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\r\n                        0.276393202250021,  // 2 * G4\r\n                        0.414589803375032,  // 3 * G4\r\n                       -0.447213595499958); // -1 + 4 * G4\r\n\r\n// First corner\r\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\r\n  vec4 x0 = v -   i + dot(i, C.xxxx);\r\n\r\n// Other corners\r\n\r\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\r\n  vec4 i0;\r\n  vec3 isX = step( x0.yzw, x0.xxx );\r\n  vec3 isYZ = step( x0.zww, x0.yyz );\r\n//  i0.x = dot( isX, vec3( 1.0 ) );\r\n  i0.x = isX.x + isX.y + isX.z;\r\n  i0.yzw = 1.0 - isX;\r\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\r\n  i0.y += isYZ.x + isYZ.y;\r\n  i0.zw += 1.0 - isYZ.xy;\r\n  i0.z += isYZ.z;\r\n  i0.w += 1.0 - isYZ.z;\r\n\r\n  // i0 now contains the unique values 0,1,2,3 in each channel\r\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\r\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\r\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\r\n\r\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\r\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\r\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\r\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\r\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\r\n  vec4 x1 = x0 - i1 + C.xxxx;\r\n  vec4 x2 = x0 - i2 + C.yyyy;\r\n  vec4 x3 = x0 - i3 + C.zzzz;\r\n  vec4 x4 = x0 + C.wwww;\r\n\r\n// Permutations\r\n  i = mod289(i); \r\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\r\n  vec4 j1 = permute( permute( permute( permute (\r\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\r\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\r\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\r\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\r\n\r\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\r\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\r\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\r\n\r\n  vec4 p0 = grad4(j0,   ip);\r\n  vec4 p1 = grad4(j1.x, ip);\r\n  vec4 p2 = grad4(j1.y, ip);\r\n  vec4 p3 = grad4(j1.z, ip);\r\n  vec4 p4 = grad4(j1.w, ip);\r\n\r\n// Normalise gradients\r\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n  p0 *= norm.x;\r\n  p1 *= norm.y;\r\n  p2 *= norm.z;\r\n  p3 *= norm.w;\r\n  p4 *= taylorInvSqrt(dot(p4,p4));\r\n\r\n// Mix contributions from the five corners\r\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\r\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\r\n  m0 = m0 * m0;\r\n  m1 = m1 * m1;\r\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\r\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\r\n\r\n  }\r\n\r\nvoid main() {\r\n    if(gl_FragCoord.x >= 1.0) return;    \r\n    \r\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n    vec3 pos = texture2D( texturePosition, uv ).xyz;\r\n    vec3 vel = texture2D( textureVelocity, uv ).xyz;\r\n    float idParticle = uv.y * resolution.x + uv.x;\r\n    float scale = 0.08;\r\n    \r\n    vel.xyz += 40.0 * vec3(\r\n      snoise( vec4( scale * pos.xyz, 7.225 * seed * 200.0 + 0.4 * time ) ),\r\n      snoise( vec4( scale * pos.xyz, 3.553 * seed + 0.4 * time ) ),\r\n      snoise( vec4( scale * pos.xyz, 1.259 * seed * 10.0 + 0.4 * time ) )\r\n    ) * 0.05;\r\n\r\n    vec3 gpos = pos - vec3(0.0,0.0,0.0);\r\n    vel += -(gpos)* length(gpos) * 0.005;\r\n\r\n    vel.xyz *= 0.9 + abs(sin(uv.y * 9.0)) * 0.05;\r\n\r\n    gl_FragColor = vec4( vel.xyz, 1.0 );\r\n}"},function(e,t){e.exports='varying vec2 vUv;\r\nuniform sampler2D backbuffer;\r\nuniform vec2 resolution;\r\n\r\nuniform bool direction;\r\nuniform float gaussVar;\r\n\r\n/*\r\nhttps://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/\r\n\r\nThe MIT License (MIT) Copyright (c) 2015 Jam3\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\r\n\tvec4 color = vec4(0.0);\r\n\tvec2 off1 = vec2(1.3846153846) * direction;\r\n\tvec2 off2 = vec2(3.2307692308) * direction;\r\n\tcolor += texture2D(image, uv) * 0.2270270270;\r\n\tcolor += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\r\n\tcolor += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\r\n\tcolor += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\r\n\tcolor += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\r\n\treturn color;\r\n}\r\n\r\nvoid main(){\r\n\r\n\tvec4 c = blur9(backbuffer,vUv,resolution,direction ? vec2(1.0,0.0) : vec2(0.0, 1.0));\r\n\r\n\tgl_FragColor = c;\r\n}'},function(e,t){e.exports="uniform sampler2D texturePosition;\r\nuniform sampler2D textureVelocity;\r\nuniform vec2 resolution;\r\n\r\nvoid main() {\r\n    if(gl_FragCoord.x <= 1.0){\r\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n        vec3 pos = texture2D( texturePosition, uv ).xyz;\r\n        vec3 vel = texture2D( textureVelocity, uv ).xyz;\r\n\r\n        pos += vel * 0.01;\r\n        gl_FragColor = vec4(pos,1.0);\r\n        \r\n    }else{\r\n        vec2 uv = gl_FragCoord.xy / resolution.xy;\r\n        vec2 bUV = (gl_FragCoord.xy - vec2(1.0,0.0)) / resolution.xy;\r\n        vec3 bPos = texture2D( texturePosition, bUV ).xyz;;\r\n        gl_FragColor = vec4(bPos,1.0);\r\n    }\r\n}"},function(e,t){e.exports="varying vec3 vViewPosition;\r\nattribute float uvx;\r\nattribute float uvy;\r\nuniform sampler2D texturePosition;\r\nuniform float camY;\r\n\r\nfloat PI = 3.14159265;\r\n\r\nfloat atan2(float y, float x)\r\n{\r\n    return x == 0.0 ? sign(y) * PI / 2.0 : atan(y, x);\r\n}\r\n\r\nmat2 rotate(float rad){\r\n    return mat2(cos(rad),sin(rad),-sin(rad),cos(rad));\r\n}\r\n\r\nvoid main() {\r\n    vec2 nUV = vec2(uvx,uvy) + vec2(1.0,0.0);\r\n    \r\n    if(nUV.x >= 1.0){\r\n        nUV = vec2(uvx,uvy) - vec2(1.0,0.0);\r\n    }\r\n\r\n    vec3 p = position * 0.3;\r\n    vec3 pos = texture2D( texturePosition, vec2(uvx,uvy)).xyz;\r\n    vec3 nPos = texture2D( texturePosition, nUV).xyz;\r\n\r\n    vec3 vec = normalize(nPos - pos);\r\n    float rotX = atan2(vec.y,vec.z);\r\n\r\n    p.xy *= sin(uvx * PI) * (sin(uvy * PI) * 1.0 + 0.1);\r\n    p.yz *= rotate(rotX);\r\n\r\n    vec4 mvPosition = modelViewMatrix * vec4(p + pos, 1.0 );\r\n    gl_Position = projectionMatrix * mvPosition;\r\n\r\n    vViewPosition = -mvPosition.xyz;\r\n}\r\n\r\n\r\n"},function(e,t){e.exports="varying vec2 vUv;\r\n\r\nvoid main() {\r\n    gl_Position = vec4( position, 1.0 );\r\n    vUv = uv;\r\n}"},function(e,t){e.exports="uniform sampler2D texture;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n    gl_FragColor = texture2D(texture,vUv);\r\n}"},function(e,t){e.exports="varying vec2 vUv;\r\n\r\nvoid main() {\r\n    vec3 pos = position;\r\n    pos.z = 1.0;\r\n    gl_Position = vec4(pos,1.0);\r\n    vUv = uv;\r\n}\r\n\r\n\r\n"},function(e,t){e.exports="varying vec2 vUv;\r\nuniform vec2 domPos;\r\nuniform vec2 domSize;\r\nuniform vec2 windowSize;\r\nuniform float time;\r\n\r\nvoid main()\r\n{\r\n  float aspect = windowSize.x / windowSize.y;\r\n  float width = domSize.x / windowSize.x;\r\n\r\n  //左上(0,0)に\r\n  vec3 pos = position + vec3(1.0,-1.0,0.0);\r\n\r\n  //size\r\n  pos.x *= width;\r\n  pos.y *= (width * aspect) * (domSize.y / domSize.x);\r\n\r\n  //left top\r\n  pos += vec3(-1.0,1.0,0.0);\r\n\r\n  //dom position (windowは(-1.0,-1.0)-(1.0,1.0)なので *2 が必要)\r\n  pos += vec3(domPos.x / windowSize.x * 2.0,-domPos.y / windowSize.y * 2.0,0.0);\r\n\r\n  gl_Position = vec4(pos, 1.0);\r\n  vUv = uv;\r\n}\r\n"},function(e,t){e.exports="uniform sampler2D backbuffer;\r\nuniform vec2 resolution;\r\nvarying vec2 vUv;\r\n\r\nuniform float threshold;\r\n\r\nvoid main(){\r\n\tvec3 c = texture2D(backbuffer,vUv).xyz;\r\n\tfloat f = max(0.0,length(c) * 1.2 - length(vec3(threshold)));\r\n\tgl_FragColor = vec4(vec3(c) * f,1.0);\r\n}"},function(e,t){e.exports="varying vec2 vUv;\r\nuniform sampler2D backbuffer;\r\nuniform vec2 resolution;\r\n\r\nuniform sampler2D sceneTex;\r\nuniform float brightness;\r\n\r\nvoid main(){\r\n\tgl_FragColor = texture2D(sceneTex, vUv) * 1.0 + texture2D(backbuffer, vUv) * brightness;\r\n}"},function(e,t){e.exports="uniform float alpha;\r\nuniform float beta;\r\nuniform vec2 resolution;\r\nuniform sampler2D dataTex;\r\n\r\nfloat sampleData( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\t\r\n\tif( uv.x < 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\r\n\t}else if( uv.x > 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y < 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\r\n\t}else if( uv.y > 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn texture2D( tex, uv + offset / resolution ).z;\r\n\r\n}\r\n\r\nvoid main(){\r\n  vec4 data = texture2D(dataTex, gl_FragCoord.xy / resolution);\r\n\r\n  float l = sampleData(dataTex, (gl_FragCoord.xy - vec2(1.0, 0.0)) / resolution, resolution);\r\n  float r = sampleData(dataTex, (gl_FragCoord.xy + vec2(1.0, 0.0)) / resolution, resolution);\r\n  float t = sampleData(dataTex, (gl_FragCoord.xy - vec2(0.0, 1.0)) / resolution, resolution);\r\n  float b = sampleData(dataTex, (gl_FragCoord.xy + vec2(0.0, 1.0)) / resolution, resolution);\r\n\r\n  float divergence = data.w;\r\n  float pressure = ((l + r + t + b) - divergence) * 0.25;\r\n\r\n  gl_FragColor = vec4(data.xy, pressure, divergence);\r\n}"},function(e,t){e.exports="precision mediump float;\r\nprecision mediump sampler2D;\r\n\r\nuniform vec2 resolution;\r\nuniform sampler2D dataTex;\r\n\r\n\t\r\nfloat sampleData( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\t\r\n\tif( uv.x < 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\r\n\t}else if( uv.x > 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y < 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\r\n\t}else if( uv.y > 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn texture2D( tex, uv + offset / resolution ).z;\r\n\r\n}\r\n\r\n    void main () {\r\n\r\n\t\tvec2 uv = gl_FragCoord.xy / resolution;\r\n\r\n\t\tfloat l = sampleData(dataTex, (gl_FragCoord.xy - vec2(1.0, 0.0)) / resolution, resolution);\r\n\t\tfloat r = sampleData(dataTex, (gl_FragCoord.xy + vec2(1.0, 0.0)) / resolution, resolution);\r\n\t\tfloat t = sampleData(dataTex, (gl_FragCoord.xy - vec2(0.0, 1.0)) / resolution, resolution);\r\n\t\tfloat b = sampleData(dataTex, (gl_FragCoord.xy + vec2(0.0, 1.0)) / resolution, resolution);\r\n\r\n        vec4 data = texture2D(dataTex, uv);\r\n\r\n        data.xy -= vec2(r - l, b - t);\r\n        gl_FragColor = data;\r\n    }"},function(e,t){e.exports="\r\nuniform float time;\r\nuniform vec2 resolution;\r\n\r\nuniform sampler2D dataTex;\r\nuniform sampler2D curlTex;\r\n\r\nuniform vec2 pointerPos;\r\nuniform vec2 pointerVec;\r\nuniform float pointerSize;\r\n\r\nuniform float screenAspect;\r\n\r\nvec2 smapleVelocity( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\tfloat w = 1.0;\r\n\t\r\n\tif( uv.x < 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\t\tw = -1.0;\r\n\r\n\t}else if( uv.x > 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\tw = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y < 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\t\tw = -1.0;\r\n\r\n\t}else if( uv.y > 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\tw = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn w * texture2D( tex, uv + offset / resolution ).xy;\r\n\r\n}\r\n\r\nfloat samplePressure( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n  \tfloat w = 1.0;\r\n\t\r\n\tif( uv.x < 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n    w = - 1.0;\r\n\r\n\t}else if( uv.x > 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n    w = - 1.0;\r\n    \r\n\t} \r\n\r\n\tif( uv.y < 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n    w = - 1.0;\r\n\r\n\t}else if( uv.y > 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n    w = - 1.0;\r\n\t\r\n\t}\r\n\r\n\treturn w * texture2D( tex, uv + offset / resolution ).z;\r\n\r\n}\r\n\r\nvoid main(){\r\n\tvec2 uv = gl_FragCoord.xy / resolution;\r\n\r\n\tvec2 offsetX = vec2(1.0, 0.0);\r\n\tvec2 offsetY = vec2(0.0, 1.0);\r\n\r\n\tfloat l = smapleVelocity(curlTex, (gl_FragCoord.xy - offsetX) / resolution, resolution).x;\r\n\tfloat r = smapleVelocity(curlTex, (gl_FragCoord.xy + offsetX) / resolution, resolution).x;\r\n\tfloat t = smapleVelocity(curlTex, (gl_FragCoord.xy - offsetY) / resolution, resolution).x;\r\n\tfloat b = smapleVelocity(curlTex, (gl_FragCoord.xy + offsetY) / resolution, resolution).x;\r\n\tfloat c = texture2D(curlTex, uv).x;\r\n\t\r\n\tvec2 force = 0.5 * vec2(abs(b) - abs(t), abs(r) - abs(l));\r\n\tforce /= length(force) + 0.0001;\r\n\tforce *= 1.0 * c;\r\n\tforce.y *= -1.0;\r\n\r\n\tvec4 data = texture2D( dataTex, uv);\r\n\r\n\tfloat pointerW = 1.0 - smoothstep( 0.0, pointerSize * 0.15, length(uv * vec2( screenAspect, 1.0 ) - pointerPos * vec2( screenAspect, 1.0 ) ) );\r\n\tvec2 mouse = vec2( 0.0, 0.0 );\r\n\tmouse += pointerW * pointerVec * 0.1;\r\n\t// data.xy = mix( data.xy, pointerVec * 0.3, pointerW);\r\n\r\n\tgl_FragColor = vec4(data.xy + mouse + force * 0.5, data.zw);\r\n}"},function(e,t){e.exports="uniform vec2 resolution;\r\nuniform sampler2D dataTex;\r\n\r\nvec2 sampleData( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\tfloat w = 1.0;\r\n\t\r\n\tif( uv.x < 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\t\tw = -1.0;\r\n\r\n\t}else if( uv.x > 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\tw = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y < 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\t\tw = -1.0;\r\n\r\n\t}else if( uv.y > 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\tw = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn w * texture2D( tex, uv + offset / resolution ).xy;\r\n\r\n}\r\n\r\nvoid main(){\r\n\r\n  vec4 data = texture2D(dataTex, gl_FragCoord.xy / resolution);\r\n\r\n  vec2 offsetX = vec2(1.0, 0.0);\r\n  vec2 offsetY = vec2(0.0, 1.0);\r\n\r\n  vec2 l = sampleData(dataTex, (gl_FragCoord.xy - offsetX) / resolution, resolution);\r\n  vec2 r = sampleData(dataTex, (gl_FragCoord.xy + offsetX) / resolution, resolution);\r\n  vec2 t = sampleData(dataTex, (gl_FragCoord.xy - offsetY) / resolution, resolution);\r\n  vec2 b = sampleData(dataTex, (gl_FragCoord.xy + offsetY) / resolution, resolution);\r\n\r\n  float divergence = ((r.x - l.x) + (b.y - t.y)) * 0.5;\r\n\r\n  gl_FragColor = vec4(data.xyz, divergence);\r\n}"},function(e,t){e.exports="uniform vec2 resolution;\r\nuniform sampler2D dataTex;\r\n\r\nuniform float velocityAttenuation;\r\nuniform float pressureAttenuation;\r\n\r\nvec2 sampleVelocity( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\tfloat w = 1.0;\r\n\t\r\n\tif( uv.x < 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\t\tw = - 1.0;\r\n\r\n\t}else if( uv.x > 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\tw = - 1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y < 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\t\tw = - 1.0;\r\n\r\n\t}else if( uv.y > 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\tw = - 1.0;\r\n\t\r\n\t}\r\n\r\n\treturn w * texture2D( tex, uv + offset / resolution ).xy;\r\n\r\n}\r\n\r\nfloat samplePressure( sampler2D tex, vec2 uv, vec2 resolution ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\t\r\n\tif( uv.x < 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\r\n\t}else if( uv.x > 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y < 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\r\n\t}else if( uv.y > 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn texture2D( tex, uv + offset / resolution ).z;\r\n\r\n}\r\n\r\nvoid main(){\r\n\tvec2 uv =  gl_FragCoord.xy / resolution;\r\n\tvec2 p = gl_FragCoord.xy - sampleVelocity(dataTex, uv, resolution);\r\n\tgl_FragColor = vec4(sampleVelocity(dataTex, p / resolution,resolution) * velocityAttenuation, samplePressure(dataTex, uv, resolution) * pressureAttenuation, 0.0);\r\n}"},function(e,t){e.exports="uniform sampler2D dataTex;\r\nuniform vec2 resolution;\r\nuniform float curl;\r\n\r\nvec2 sampleData( sampler2D tex, vec2 uv, vec2 res ){\r\n\r\n\tvec2 offset = vec2( 0.0, 0.0 );\r\n\tfloat w = 1.0;\r\n\t\r\n\tif( uv.x < 0.0 ){\r\n\r\n\t\toffset.x = 1.0;\r\n\t\tw = -1.0;\r\n\r\n\t}else if( uv.x > 1.0 ){\r\n\r\n\t\toffset.x = -1.0;\r\n\t\tw = -1.0;\r\n\t\r\n\t}\r\n\r\n\tif( uv.y < 0.0 ){\r\n\r\n\t\toffset.y = 1.0;\r\n\t\tw = -1.0;\r\n\r\n\t}else if( uv.y > 1.0 ){\r\n\t\t\r\n\t\toffset.y = -1.0;\r\n\t\tw = -1.0;\r\n\t\r\n\t}\r\n\r\n\treturn w * texture2D( tex, uv + offset / res ).xy;\r\n\r\n}\r\n\r\nvoid main () {\r\n\tvec2 uv = gl_FragCoord.xy / resolution;\r\n\r\n\tvec2 offsetX = vec2(1.0, 0.0);\r\n\tvec2 offsetY = vec2(0.0, 1.0);\r\n\r\n\tfloat l = sampleData(dataTex, (gl_FragCoord.xy - offsetX) / resolution, resolution).y;\r\n\tfloat r = sampleData(dataTex, (gl_FragCoord.xy + offsetX) / resolution, resolution).y;\r\n\tfloat t = sampleData(dataTex, (gl_FragCoord.xy - offsetY) / resolution, resolution).x;\r\n\tfloat b = sampleData(dataTex, (gl_FragCoord.xy + offsetY) / resolution, resolution).x;\r\n\r\n\tfloat c = (r - l - b + t);\r\n\tgl_FragColor = vec4(curl * c, 0.0, 0.0, 1.0);\r\n}"},function(e){e.exports={name:"ore-three-ts",version:"0.3.1",description:"Three.js utils.",main:"build/ore-three.js",scripts:{dev:"webpack-dev-server --watch-content-base --config ./webpack/dev.config.js",build:"npm run build:module && npm run build:min && npm run build:types && npm run build:typedoc","build:module":"webpack --config ./webpack/build-module.config.js","build:min":"webpack --config ./webpack/build-min.config.js","build:types":"tsc --emitDeclarationOnly","build:typedoc":"typedoc --out ./docs/ ./src/ --mode file --name ore-three"},repository:{type:"git",url:"git@github.com:ukonpower/ore-three-ts.git"},keywords:["threejs","webgl"],types:"types/index.d.ts",files:["build","src","types"],author:"ukonpower",bugs:{url:"https://github.com/ukonpower/ore-three-ts/issues"},license:"MIT",devDependencies:{"shader-loader":"^1.3.1","ts-loader":"^6.0.0",typedoc:"^0.14.2",typescript:"^3.4.5",webpack:"^4.30.0","webpack-cli":"^3.3.2","webpack-dev-server":"^3.3.1","webpack-merge":"^4.2.1"},dependencies:{three:"^0.105.0"}}},function(e,t,r){"use strict";r.r(t);var n,o=r(0),i=function(){function e(){this.attenuation=.9,this.hoverMode=!1,this._position=new o.Vector2(0,0),this._delta=new o.Vector2(0,0),this._hoverPosition=new o.Vector2(0,0),this._hoverDelta=new o.Vector2(0,0);var e=navigator.userAgent;e.indexOf("iPhone")>=0||e.indexOf("iPad")>=0||e.indexOf("Android")>=0?(window.addEventListener("touchstart",this._TouchStart.bind(this)),window.addEventListener("touchmove",this._TouchMove.bind(this),{passive:!1}),window.addEventListener("touchend",this._TouchEnd.bind(this))):(window.addEventListener("mousedown",this._TouchStart.bind(this)),window.addEventListener("mousemove",this._TouchMove.bind(this)),window.addEventListener("mouseup",this._TouchEnd.bind(this)),window.addEventListener("dragend",this._TouchEnd.bind(this)),window.addEventListener("wheel",this.wheel.bind(this),{passive:!1})),this._position.set(NaN,NaN),this._hoverPosition.set(NaN,NaN),this._touchDown=!1}return Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delta",{get:function(){return this._delta},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverPosition",{get:function(){return this._hoverPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverDelta",{get:function(){return this._hoverDelta},enumerable:!0,configurable:!0}),e.prototype.getRelativePosition=function(e,t){var r,n=e.getClientRects()[0];if(this.hoverMode)r=this._hoverPosition;else{if(!this._touchDown)return null;r=this._position}var i=r.x-n.left,s=r.y-n.top;return t&&(i/=n.width,s/=n.height),new o.Vector2(i,s)},e.prototype.setPos=function(e,t){this._touchDown&&(Number.isNaN(this._position.x)||Number.isNaN(this._position.y)?this._delta.set(0,0):this._delta.set(e-this._position.x,t-this._position.y),this._position.set(e,t)),Number.isNaN(this._hoverPosition.x)||Number.isNaN(this._hoverPosition.y)?this._hoverDelta.set(0,0):this._hoverDelta.set(e-this._hoverPosition.x,t-this._hoverPosition.y),this._hoverPosition.set(e,t)},e.prototype._TouchStart=function(e){e.touches?this._position.set(e.touches[0].clientX+window.pageXOffset,e.touches[0].clientY+window.pageYOffset):0==e.button&&this.setPos(e.pageX,e.pageY),this._touchDown=!0,this.onTouchStart&&this.onTouchStart(e)},e.prototype._TouchMove=function(e){e.touches?this.setPos(e.touches[0].clientX+window.pageXOffset,e.touches[0].clientY+window.pageYOffset):this.setPos(e.pageX,e.pageY),this._touchDown&&this.onTouchMove&&this.onTouchMove(e)},e.prototype._TouchEnd=function(e){this._touchDown&&(this._touchDown=!1,this._position.set(NaN,NaN),this.onTouchEnd&&this.onTouchEnd(e),this._delta.set(0,0))},e.prototype.wheel=function(e){this.onWheel&&this.onWheel(e)},e.prototype.update=function(){this._delta.multiplyScalar(this.attenuation),this._hoverDelta.multiplyScalar(this.attenuation),this.hoverMode&&this.onHover&&this.onHover()},e}(),s=r(17).version,a=function(){function e(e){console.log("%c- Welcome to Ore-Three "+s+" -","padding: 5px 10px ;background-color: black; color: white;font-size:11px"),console.log("%c↓↓ THANKS TO THIS POWERFULL ENGINE!!","padding: 2px 2px ;background-color: black; color: white; font-size:5px"),this.renderer=new o.WebGLRenderer(e),this.renderer.debug.checkShaderErrors=!0,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(e.retina?window.devicePixelRatio:1),this.cursor=new i,this.cursor.onTouchStart=this.onTouchStart.bind(this),this.cursor.onTouchMove=this.onTouchMove.bind(this),this.cursor.onTouchEnd=this.onTouchEnd.bind(this),this.cursor.onHover=this.onHover.bind(this),this.cursor.onWheel=this.onWheel.bind(this),this.clock=new o.Clock,this.gProps={renderer:this.renderer,cursor:this.cursor},window.addEventListener("orientationchange",this.onOrientationDevice.bind(this)),window.addEventListener("resize",this.onWindowResize.bind(this)),this.tick()}return e.prototype.tick=function(){var e=this.clock.getDelta();this.cursor.update(),this.currentScene&&this.currentScene.tick(e),requestAnimationFrame(this.tick.bind(this))},e.prototype.bindScene=function(e){this.currentScene=e,this.currentScene.onBind(this.gProps),this.onWindowResize()},e.prototype.unbindScene=function(){this.currentScene&&(this.currentScene.onUnbind(),this.currentScene=null,this.renderer.renderLists.dispose())},e.prototype.onWindowResize=function(){var e=window.innerWidth,t=window.innerHeight;this.renderer.setSize(e,t),this.currentScene&&this.currentScene.onResize(e,t)},e.prototype.onOrientationDevice=function(){this.onWindowResize()},e.prototype.onTouchStart=function(e){this.currentScene&&this.currentScene.onTouchStart(this.cursor,e)},e.prototype.onTouchMove=function(e){this.currentScene&&this.currentScene.onTouchMove(this.cursor,e)},e.prototype.onTouchEnd=function(e){this.currentScene&&this.currentScene.onTouchEnd(this.cursor,e)},e.prototype.onHover=function(){this.currentScene&&this.currentScene.onHover(this.cursor)},e.prototype.onWheel=function(e){this.currentScene&&this.currentScene.onWheel(e)},e}(),u=function(){function e(e){this._pageOffset=0,this.scrollVel=0,this.x=1,this.isAutoMoving=!1,this.element=e,this.rect=this.element.getBoundingClientRect()}return Object.defineProperty(e.prototype,"pageOffset",{get:function(){return this._pageOffset},enumerable:!0,configurable:!0}),e.prototype.resize=function(){this.rect=this.element.getBoundingClientRect()},e.prototype.moveto=function(e,t,r){if(void 0===t&&(t=1),void 0===r&&(r=null),e){if(!this.isAutoMoving){var n=e.getBoundingClientRect().top;this.baseOffset=this.pageOffset,this.x=0,this.scrollVel=0,this.isAutoMoving=!0,this.duration=t,this.scrollDistance=Math.min(n,this.rect.height-(this.pageOffset+window.innerHeight)),this.onAutoMoved=r}}else console.log("target is null.")},e.prototype.setScrollVelocity=function(e){this.isAutoMoving=!1,this.scrollVel=e},e.prototype.update=function(e){if(this.isAutoMoving){this.x+=(e||.016)/this.duration;var t=!1;this.x>=1&&(t=!0,this.x=1);var r=this.sigmoid(6,this.x);this._pageOffset=this.baseOffset+this.scrollDistance*r,t&&(this.onAutoMoved&&this.onAutoMoved(),this.isAutoMoving=!1,this.onAutoMoved=null)}else this._pageOffset+=this.scrollVel,this._pageOffset=Math.min(Math.max(0,this.pageOffset),this.rect.height-window.innerHeight),this.scrollVel*=.95;this.element.style.transform="translate3d( 0,"+-this._pageOffset+"px,0 )"},e.prototype.sigmoid=function(e,t){var r=Math.exp(-e*(2*t-1)),n=Math.exp(-e);return(1+(1-r)/(1+r)*(1+n)/(1-n))/2},e}(),l=function(){function e(){this.time=0,this.name="",this.scene=new o.Scene,this.camera=new o.PerspectiveCamera(50,innerWidth/innerHeight,.1,1e3),this.width=window.innerWidth,this.height=window.innerHeight}return e.prototype.tick=function(e){this.time+=e,this.animate(e)},e.prototype.animate=function(e){},e.prototype.onBind=function(e){this.gProps=e},e.prototype.onUnbind=function(){this.removeChildrens(this.scene)},e.prototype.removeChildrens=function(e){for(var t=e.children.length-1;t>=0;t--){this.removeChildrens(e.children[t]);var r=void 0,n=void 0;e.children[t].isMesh&&(r=e.children[t].geometry,n=e.children[t].material),e.remove(e.children[t]),r&&r.dispose(),n&&n.dispose()}},e.prototype.onResize=function(e,t){this.width=e,this.height=t,this.camera.aspect=e/t,this.camera.updateProjectionMatrix()},e.prototype.onTouchStart=function(e,t){},e.prototype.onTouchMove=function(e,t){},e.prototype.onTouchEnd=function(e,t){},e.prototype.onHover=function(e){},e.prototype.onWheel=function(e){},e}(),c=function(){function e(e){this.x=0,this.duration=1,this.isMoving=!1,this.force=!1,this.objPos=e.position,this.objRot=e.rotation,this.setBaseTransform()}return e.prototype.setBaseTransform=function(){this.basePos=this.objPos.clone(),this.baseRot=this.objRot.toVector3()},e.prototype.move=function(e,t,r,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=1),!(this.isMoving&&!this.force)&&(e||(e=this.objPos.clone()),t||(t=this.objRot.clone()),n&&(this.onFinish=n),this.duration=r,this.setBaseTransform(),this.goalPos=e.clone(),this.goalRot=t.toVector3(),this.distancePos=(new o.Vector3).subVectors(this.goalPos,this.basePos),this.distanceRot=(new o.Vector3).subVectors(this.goalRot,this.baseRot),this.x=0,this.isMoving=!0,!0)},e.prototype.update=function(e){var t=!1;if(this.isMoving){this.x+=(e||.016)/this.duration,this.x>1&&(this.x=1,t=!0);var r=this.sigmoid(6,this.x);this.objPos.set(this.basePos.x+this.distancePos.x*r,this.basePos.y+this.distancePos.y*r,this.basePos.z+this.distancePos.z*r),this.objRot.set(this.baseRot.x+this.distanceRot.x*r,this.baseRot.y+this.distanceRot.y*r,this.baseRot.z+this.distanceRot.z*r),t&&(this.x=0,this.isMoving=!1,this.onFinish&&(this.onFinish(),this.onFinish=null))}},e.prototype.sigmoid=function(e,t){var r=Math.exp(-e*(2*t-1)),n=Math.exp(-e);return(1+(1-r)/(1+r)*(1+n)/(1-n))/2},e}(),f=function(){function e(e){this.target=e,this.scrollVel=new o.Vector2}return e.prototype.update=function(){this.scrollVel.multiplyScalar(.96);var e=new o.Vector3(this.scrollVel.y,this.scrollVel.x,0).normalize(),t=(new o.Quaternion).setFromAxisAngle(e,this.scrollVel.length());t.multiply(this.target.quaternion),this.target.quaternion.copy(t)},e.prototype.addVelocity=function(e){this.scrollVel.addVectors(this.scrollVel,e.multiplyScalar(.001))},e}(),h=function(){function e(e,t){this.target=e,this.rotate=new o.Quaternion,this.rotMat=new o.Matrix4,this.scrollVel=new o.Vector2(0,0),this.uniform=t,this.uniform.rotVec={value:this.scrollVel},this.uniform.rotation={value:null}}return e.prototype.update=function(){this.scrollVel.multiplyScalar(.96);var e=new o.Vector3(this.scrollVel.y,this.scrollVel.x,0).normalize(),t=(new o.Quaternion).setFromAxisAngle(e,this.scrollVel.length());t.multiply(this.rotate),this.rotate.copy(t),this.uniform.rotation.value=this.rotMat.compose(new o.Vector3,this.rotate,this.target.scale)},e.prototype.addVelocity=function(e){this.scrollVel.addVectors(this.scrollVel,e.multiplyScalar(.001))},e}(),d=function(){function e(e){this.isLoaded=!1,this.listener=e.listener?e.listener:new o.AudioListener,this.audio=new o.Audio(this.listener),this.bufferSize=e.bufferSize?e.bufferSize:128,this.uniforms=[],e.src&&this.load(e.src)}return Object.defineProperty(e.prototype,"isPlaying",{get:function(){return!!this.audio&&this.audio.isPlaying},enumerable:!0,configurable:!0}),e.prototype.load=function(e){var t=this;this.audio.buffer&&this.audio.stop();var r=new o.AudioLoader;this.isLoaded=!1,this.onLoad=null,r.load(e,function(e){t.audio.setBuffer(e),t.audio.setLoop(!0),t.audio.setVolume(.5),t.analyser=new o.AudioAnalyser(t.audio,t.bufferSize),t.soundData=new o.DataTexture(t.analyser.data,t.bufferSize/2,1,o.LuminanceFormat),t.soundData.needsUpdate=!0,t.isLoaded=!0,t.setUniformData(t.uniforms),t.onLoad&&t.onLoad()},function(e){console.log(e.loaded/e.total*100+"% loaded")},function(e){console.log("An error happened: "+e)})},e.prototype.play=function(){var e=this;this.isLoaded?this.audio.play():this.onLoad=function(){e.audio.play()}},e.prototype.pause=function(){this.audio.isPlaying&&this.audio.pause()},e.prototype.registerUniforms=function(e){this.uniforms.push(e),this.setUniformData([e])},e.prototype.setUniformData=function(e){var t=this;e.forEach(function(e){e.audioSpectrum={value:t.soundData},e.audioVolume={value:t.volume}})},e.prototype.update=function(){var e=this;this.analyser&&(this.analyser.getFrequencyData(),this.volume=this.analyser.getAverageFrequency(),this.uniforms.forEach(function(t){t.audioSpectrum.value.needsUpdate=!0,t.audioVolume.value=e.volume}))},e}(),v=r(3),p=r.n(v),m=r(1),x=r.n(m),y=r(4),g=r.n(y),w=r(5),b=r.n(w),T=r(6),D=r.n(T),S=function(){function e(e,t){this.renderer=e,this.resolution=t,this.tempData=this.createData({minFilter:o.LinearFilter,magFilter:o.LinearFilter}),this.scene=new o.Scene,this.camera=new o.Camera,this.camera.position.z=1,this.materials=[],this.mesh=new o.Mesh(new o.PlaneBufferGeometry(2,2)),this.scene.add(this.mesh)}return Object.defineProperty(e.prototype,"isSupported",{get:function(){return this.renderer.extensions.get("OES_texture_float")},enumerable:!0,configurable:!0}),e.prototype.createInitializeTexture=function(){var e=new Float32Array(this.resolution.x*this.resolution.y*4),t=new o.DataTexture(e,this.resolution.x,this.resolution.y,o.RGBAFormat,o.FloatType);return t.needsUpdate=!0,t},e.prototype.createData=function(e,t){var r,n,i={wrapS:o.ClampToEdgeWrapping,wrapT:o.ClampToEdgeWrapping,minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,type:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?o.HalfFloatType:o.FloatType,stencilBuffer:!1,depthBuffer:!1};e&&(e.isDataTexture?(r=e,t&&(n=t)):n=e),n&&(i.wrapS=n.wrapS||i.wrapS,i.wrapT=n.wrapT||i.wrapT,i.minFilter=n.minFilter||i.minFilter,i.magFilter=n.magFilter||i.magFilter,i.format=n.format||i.format,i.type=n.type||i.type,i.stencilBuffer=n.stencilBuffer||i.stencilBuffer,i.depthBuffer=n.depthBuffer||i.depthBuffer);var s={buffer:new o.WebGLRenderTarget(this.resolution.x,this.resolution.y,i)};if(r){var a=this.createKernel(D.a);a.uniforms.texture={value:r},this.compute(a,s)}return s},e.prototype.createKernel=function(e){var t={resolution:{value:this.resolution}},r=new o.ShaderMaterial({vertexShader:b.a,fragmentShader:e,uniforms:t});return this.materials.push(r),{material:r,uniforms:t}},e.prototype.compute=function(e,t){this.mesh.material=e.material,this.renderer.setRenderTarget(this.tempData.buffer),this.renderer.render(this.scene,this.camera),this.swapBuffers(t,this.tempData),this.renderer.setRenderTarget(null)},e.prototype.swapBuffers=function(e,t){var r=e.buffer;e.buffer=t.buffer,t.buffer=r},e.prototype.dispose=function(){this.mesh.geometry.dispose();for(var e=0;e<this.materials.length;e++)this.materials[e].dispose();this.scene.remove(this.mesh),this.tempData.buffer.dispose()},e}(),_=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),P=function(e){function t(t,r,n,i){void 0===i&&(i=null);var s=e.call(this)||this;s.renderer=t,s.num=r,s.length=n,s.fragment=null!=i?i:x.a,s.gcController=new S(s.renderer,new o.Vector2(s.length,s.num)),s.kernels={position:s.gcController.createKernel(p.a),velocity:s.gcController.createKernel(x.a)};var a=s.gcController.createInitializeTexture();return s.initPosition(a),s.positionData=s.gcController.createData(a),s.velocityData=s.gcController.createData(),a.dispose(),s.kernels.position.uniforms.texturePosition={value:null},s.kernels.position.uniforms.textureVelocity={value:null},s.kernels.velocity.uniforms.texturePosition={value:null},s.kernels.velocity.uniforms.textureVelocity={value:null},s.kernels.velocity.uniforms.time={value:0},s.kernels.velocity.uniforms.seed={value:100*Math.random()},s.createTrails(),s}return _(t,e),t.prototype.initPosition=function(e){for(var t=e.image.data,r=new o.Vector3(10,10,10),n=0;n<t.length;n+=4*this.length)for(var i=Math.random()*r.x-r.x/2,s=Math.random()*r.y-r.y/2,a=Math.random()*r.z-r.z/2,u=0;u<4*this.length;u+=4)t[n+u+0]=i,t[n+u+1]=s,t[n+u+2]=a,t[n+u+3]=1},t.prototype.createTrails=function(){for(var e=new o.InstancedBufferGeometry,t=[],r=[],n=[],i=[],s=[],a=0;a<this.length;a++)for(var u=a,l=0;l<10;l++){var c=2*Math.PI/10*l,f=.1*Math.cos(c),h=.1*Math.sin(c);0,t.push(f),t.push(h),t.push(0);var d=new o.Vector3(f,h,0);d.normalize(),n.push(d.x,d.y,d.z),i.push(a/this.length);var v=10*u+l;a>0&&(r.push(v),r.push(10*(u-1)+(l+1)%10),r.push(10*u+(l+1)%10),r.push(v),r.push(v-10),r.push(10*(u-1)+(l+1)%10))}var p=new Float32Array(t),m=new Float32Array(n),x=new Uint32Array(r),y=new Float32Array(i);e.addAttribute("position",new o.BufferAttribute(p,3)),e.addAttribute("uvx",new o.BufferAttribute(y,1)),e.addAttribute("normal",new o.BufferAttribute(m,3)),e.setIndex(new o.BufferAttribute(x,1));for(var w=0;w<this.num;w++)s.push(w/this.num);var b=new Float32Array(s);e.addAttribute("uvy",new o.InstancedBufferAttribute(b,1,!1,1));var T=o.ShaderLib.standard;this.uni=o.UniformsUtils.merge([T.uniforms,{texturePosition:{value:null},textureVelocity:{value:null}}]);var D=new o.ShaderMaterial({uniforms:this.uni,vertexShader:g.a,fragmentShader:T.fragmentShader,lights:!0,flatShading:!0}),S=new o.Mesh(e,D);S.matrixAutoUpdate=!1,S.updateMatrix(),this.add(S)},t.prototype.update=function(e){this.kernels.velocity.uniforms.time.value=e,this.kernels.velocity.uniforms.textureVelocity.value=this.velocityData.buffer.texture,this.kernels.velocity.uniforms.texturePosition.value=this.positionData.buffer.texture,this.gcController.compute(this.kernels.velocity,this.velocityData),this.kernels.position.uniforms.textureVelocity.value=this.velocityData.buffer.texture,this.kernels.position.uniforms.texturePosition.value=this.positionData.buffer.texture,this.gcController.compute(this.kernels.position,this.positionData),this.uni.texturePosition.value=this.positionData.buffer.texture,this.uni.textureVelocity.value=this.velocityData.buffer.texture},t.prototype.dispose=function(){this.positionData.buffer.dispose(),this.velocityData.buffer.dispose(),this.gcController.dispose()},t}(o.Object3D),C=r(7),z=r.n(C),A=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(e){function t(t,r){var n=e.call(this)||this;return n.frag=t,n.uni=r,n.createMesh(),n}return A(t,e),t.prototype.createMesh=function(){var e=new o.BufferGeometry,t=[],r=[],n=[];t.push(-1,1,0),t.push(1,1,0),t.push(1,-1,0),t.push(-1,-1,0),n.push(0,1),n.push(1,1),n.push(1,0),n.push(0,0),r.push(0,2,1,0,3,2);var i=new Float32Array(t),s=new Uint32Array(r),a=new Float32Array(n);e.addAttribute("position",new o.BufferAttribute(i,3)),e.addAttribute("uv",new o.BufferAttribute(a,2)),e.setIndex(new o.BufferAttribute(s,1));var u=new o.ShaderMaterial({uniforms:this.uni,fragmentShader:this.frag,vertexShader:z.a,transparent:!0});this.add(new o.Mesh(e,u))},t}(o.Object3D),M=function(){function e(e,t,r){var n=this;this.renderer=e,this.resolution=new o.Vector2,this.renderer.getSize(this.resolution),this.resolution.multiplyScalar(this.renderer.getPixelRatio()*r?r:1),this.scene=new o.Scene,this.camera=new o.OrthographicCamera(-1,1,1,-1,0,1),this.screenMesh=new o.Mesh(new o.PlaneGeometry(2,2),null),this.scene.add(this.screenMesh),this.initRenderTargets(),t.forEach(function(e){e.uniforms||(e.uniforms={}),e.uniforms.backbuffer||(e.uniforms.backbuffer={value:null}),e.uniforms.resolution||(e.uniforms.resolution={value:n.resolution});var t={material:new o.ShaderMaterial({uniforms:e.uniforms,vertexShader:"varying vec2 vUv; void main() { vUv = uv; gl_Position = vec4( position, 1.0 ); } ",fragmentShader:e.fragmentShader}),uniforms:e.uniforms};n.effectMaterials?n.effectMaterials.push(t):n.effectMaterials=[t]})}return e.prototype.initRenderTargets=function(){this.readBuffer=this.createRenderTarget(),this.writeBuffer=this.createRenderTarget()},e.prototype.createRenderTarget=function(){return new o.WebGLRenderTarget(this.resolution.x,this.resolution.y)},e.prototype.swapBuffers=function(){var e=this.writeBuffer;this.writeBuffer=this.readBuffer,this.readBuffer=e},e.prototype.render=function(e,t,r){var n=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===r&&(r=!1);var o=!1,i=!1;"Scene"==e.type?(this.renderer.setRenderTarget(this.readBuffer),this.renderer.render(e,t),o=r):"boolean"==typeof e?o=e:(this.effectMaterials[0].uniforms.backbuffer.value=e,i=!0,o=t),this.effectMaterials.forEach(function(e,t){n.screenMesh.material=e.material,(!i||t>0)&&(e.uniforms.backbuffer.value=n.readBuffer.texture),t<n.effectMaterials.length-1||o?n.renderer.setRenderTarget(n.writeBuffer):n.renderer.setRenderTarget(null),n.renderer.render(n.scene,n.camera),n.swapBuffers()}),this.resultBuffer=o?this.readBuffer:null},e.prototype.getResultTexture=function(){return this.resultBuffer?this.resultBuffer.texture:null},e.prototype.resize=function(e,t){this.readBuffer.setSize(e,t)},e}(),R=r(8),O=r.n(R),V=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(e){function t(t){var r=e.call(this)||this;r.dom=t.dom,r.uni=t.uniforms,r.frag=t.fragmentShader;var n=r.dom.getBoundingClientRect();return r.domPos=new o.Vector2(n.left,n.right),r.domSize=new o.Vector2(n.width,n.height),r.windowSize=new o.Vector2(window.innerWidth,window.innerHeight),r.uni.domPos={value:r.domPos},r.uni.domSize={value:r.domSize},r.uni.windowSize={value:r.windowSize},r.createMesh(),r}return V(t,e),t.prototype.createMesh=function(){var e=new o.PlaneGeometry(2,2,1,1),t=new o.ShaderMaterial({uniforms:this.uni,fragmentShader:this.frag,vertexShader:O.a,transparent:!0}),r=new o.Mesh(e,t);r.frustumCulled=!1,r.position.set(0,0,0),r.rotateY(Math.PI),this.add(r)},t.prototype.updateDom=function(){this.windowSize.set(window.innerWidth,window.innerHeight);var e=this.dom.getBoundingClientRect();this.domSize.set(e.width,e.height),this.domPos.set(e.left,e.top)},t}(o.Object3D),E=r(9),I=r.n(E),L=r(2),B=r.n(L),N=r(10),U=r.n(N),j=function(){function e(e){this.renderCount=5,this.threshold=.9,this.brightness=.9,this.renderer=e,this.init()}return e.prototype.init=function(){this.sceneTex={value:null},this.resolution={value:new o.Vector2},this.resize(),this._brightUni={threshold:{value:this.threshold}},this._blurUni1={direction:{value:!0},resolution:this.resolution},this._blurUni2={direction:{value:!1},resolution:this.resolution},this._bloomUni={sceneTex:this.sceneTex,brightness:{value:this.brightness}};var e=[{fragmentShader:I.a,uniforms:this._brightUni}],t=[{fragmentShader:B.a,uniforms:this._blurUni1},{fragmentShader:B.a,uniforms:this._blurUni2}],r=[{fragmentShader:U.a,uniforms:this._bloomUni}];this._brightPP=new M(this.renderer,e,.1),this._blurPP=new M(this.renderer,t,.1),this._bloomPP=new M(this.renderer,r),this.sceneRenderTarget=this._bloomPP.createRenderTarget()},e.prototype.render=function(e,t){this._brightUni.threshold.value=this.threshold,this._bloomUni.brightness.value=this.brightness,this.renderer.setRenderTarget(this.sceneRenderTarget),this.renderer.render(e,t),this.sceneTex.value=this.sceneRenderTarget.texture,this._brightPP.render(this.sceneRenderTarget.texture,!0);for(var r=this._brightPP.getResultTexture(),n=0;n<this.renderCount;n++)this._blurPP.render(r,!0),r=this._blurPP.getResultTexture();this._bloomPP.render(r,!1)},e.prototype.resize=function(e,t){this.resolution.value.x=(e||window.innerWidth)/20,this.resolution.value.y=(t||window.innerHeight)/20},e}(),H=r(11),W=r.n(H),Y=r(12),G=r.n(Y),X=r(13),K=r.n(X),q=r(14),Z=r.n(q),Q=r(15),J=r.n(Q),$=r(16),ee=r.n($),te=function(){function e(e,t){this.parameter={solverIteration:20,screenAspect:1,pointerSize:1,curl:.1,velocityAttenuation:.95,pressureAttenuation:.8},this.time=0,this.renderer=e,this.resolution=t,this.gcConroller=new S(this.renderer,this.resolution),this.kernels={curl:this.gcConroller.createKernel(ee.a),divergence:this.gcConroller.createKernel(Z.a),velocity:this.gcConroller.createKernel(K.a),gradientSubtract:this.gcConroller.createKernel(G.a),pressure:this.gcConroller.createKernel(W.a),advect:this.gcConroller.createKernel(J.a)},this.kernels.curl.uniforms.dataTex={value:null},this.kernels.curl.uniforms.curl={value:this.parameter.curl},this.kernels.velocity.uniforms.dataTex={value:null},this.kernels.velocity.uniforms.curlTex={value:null},this.kernels.velocity.uniforms.screenAspect={value:this.parameter.screenAspect},this.kernels.velocity.uniforms.pointerPos={value:0},this.kernels.velocity.uniforms.pointerVec={value:0},this.kernels.velocity.uniforms.pointerSize={value:this.parameter.pointerSize},this.kernels.pressure.uniforms.dataTex={value:null},this.kernels.gradientSubtract.uniforms.dataTex={value:null},this.kernels.divergence.uniforms.dataTex={value:null},this.kernels.advect.uniforms.dataTex={value:null},this.kernels.advect.uniforms.velocityAttenuation={value:this.parameter.velocityAttenuation},this.kernels.advect.uniforms.pressureAttenuation={value:this.parameter.pressureAttenuation},this.fluidData=this.gcConroller.createData({magFilter:o.LinearFilter,minFilter:o.LinearFilter}),this.curlData=this.gcConroller.createData({magFilter:o.LinearFilter,minFilter:o.LinearFilter})}return e.prototype.update=function(e){this.time+=e,this.kernels.curl.uniforms.curl.value=this.parameter.curl,this.kernels.velocity.uniforms.screenAspect.value=this.parameter.screenAspect,this.kernels.velocity.uniforms.pointerSize.value=this.parameter.pointerSize,this.kernels.advect.uniforms.velocityAttenuation.value=this.parameter.velocityAttenuation,this.kernels.advect.uniforms.pressureAttenuation.value=this.parameter.pressureAttenuation,this.kernels.curl.uniforms.dataTex.value=this.fluidData.buffer.texture,this.gcConroller.compute(this.kernels.curl,this.curlData),this.kernels.velocity.uniforms.dataTex.value=this.fluidData.buffer.texture,this.kernels.velocity.uniforms.curlTex.value=this.curlData.buffer.texture,this.gcConroller.compute(this.kernels.velocity,this.fluidData),this.kernels.divergence.uniforms.dataTex.value=this.fluidData.buffer.texture,this.gcConroller.compute(this.kernels.divergence,this.fluidData);for(var t=0;t<20;t++)this.kernels.pressure.uniforms.dataTex.value=this.fluidData.buffer.texture,this.gcConroller.compute(this.kernels.pressure,this.fluidData);this.kernels.gradientSubtract.uniforms.dataTex.value=this.fluidData.buffer.texture,this.gcConroller.compute(this.kernels.gradientSubtract,this.fluidData),this.kernels.advect.uniforms.dataTex.value=this.fluidData.buffer.texture,this.gcConroller.compute(this.kernels.advect,this.fluidData)},e.prototype.setPointer=function(e,t){this.kernels.velocity.uniforms.pointerPos.value=e,this.kernels.velocity.uniforms.pointerVec.value=t},e.prototype.getTexture=function(){return this.fluidData.buffer.texture},e.prototype.resize=function(e,t){},e}();r.d(t,"Controller",function(){return a}),r.d(t,"Cursor",function(){return i}),r.d(t,"PageScroller",function(){return u}),r.d(t,"BaseScene",function(){return l}),r.d(t,"TransformAnimator",function(){return c}),r.d(t,"MouseRotator",function(){return f}),r.d(t,"MouseVertexRotator",function(){return h}),r.d(t,"AudioPlayer",function(){return d}),r.d(t,"Fish",function(){return P}),r.d(t,"Background",function(){return F}),r.d(t,"PostProcessing",function(){return M}),r.d(t,"DomGLSL",function(){return k}),r.d(t,"BloomFilter",function(){return j}),r.d(t,"StableFluids",function(){return te}),r.d(t,"GPUComputationController",function(){return S})}]);